{"ast":null,"code":"\"use strict\";\n\nconst sockjs = require(\"sockjs\");\nconst BaseServer = require(\"./BaseServer\");\n\n/** @typedef {import(\"../Server\").WebSocketServerConfiguration} WebSocketServerConfiguration */\n/** @typedef {import(\"../Server\").ClientConnection} ClientConnection */\n\n// Workaround for sockjs@~0.3.19\n// sockjs will remove Origin header, however Origin header is required for checking host.\n// See https://github.com/webpack/webpack-dev-server/issues/1604 for more information\n{\n  // @ts-ignore\n  const SockjsSession = require(\"sockjs/lib/transport\").Session;\n  const decorateConnection = SockjsSession.prototype.decorateConnection;\n\n  /**\n   * @param {import(\"http\").IncomingMessage} req\n   */\n  // eslint-disable-next-line func-names\n  SockjsSession.prototype.decorateConnection = function (req) {\n    decorateConnection.call(this, req);\n    const connection = this.connection;\n    if (connection.headers && !(\"origin\" in connection.headers) && \"origin\" in req.headers) {\n      connection.headers.origin = req.headers.origin;\n    }\n  };\n}\nmodule.exports = class SockJSServer extends BaseServer {\n  // options has: error (function), debug (function), server (http/s server), path (string)\n  /**\n   * @param {import(\"../Server\")} server\n   */\n  constructor(server) {\n    super(server);\n    this.implementation = sockjs.createServer({\n      // Use provided up-to-date sockjs-client\n      sockjs_url: \"/__webpack_dev_server__/sockjs.bundle.js\",\n      // Default logger is very annoy. Limit useless logs.\n      /**\n       * @param {string} severity\n       * @param {string} line\n       */\n      log: (severity, line) => {\n        if (severity === \"error\") {\n          this.server.logger.error(line);\n        } else if (severity === \"info\") {\n          this.server.logger.log(line);\n        } else {\n          this.server.logger.debug(line);\n        }\n      }\n    });\n\n    /**\n     * @param {import(\"sockjs\").ServerOptions & { path?: string }} options\n     * @returns {string | undefined}\n     */\n    const getPrefix = options => {\n      if (typeof options.prefix !== \"undefined\") {\n        return options.prefix;\n      }\n      return options.path;\n    };\n    const options = {\n      ... /** @type {WebSocketServerConfiguration} */\n      this.server.options.webSocketServer.options,\n      prefix: getPrefix( /** @type {NonNullable<WebSocketServerConfiguration[\"options\"]>} */\n\n      /** @type {WebSocketServerConfiguration} */\n      this.server.options.webSocketServer.options)\n    };\n    this.implementation.installHandlers( /** @type {import(\"http\").Server} */this.server.server, options);\n    this.implementation.on(\"connection\", client => {\n      // @ts-ignore\n      // Implement the the same API as for `ws`\n      client.send = client.write;\n      // @ts-ignore\n      client.terminate = client.close;\n      this.clients.push( /** @type {ClientConnection} */client);\n      client.on(\"close\", () => {\n        this.clients.splice(this.clients.indexOf( /** @type {ClientConnection} */client), 1);\n      });\n    });\n\n    // @ts-ignore\n    this.implementation.close = callback => {\n      callback();\n    };\n  }\n};","map":{"version":3,"names":["sockjs","require","BaseServer","SockjsSession","Session","decorateConnection","prototype","req","call","connection","headers","origin","module","exports","SockJSServer","constructor","server","implementation","createServer","sockjs_url","log","severity","line","logger","error","debug","getPrefix","options","prefix","path","webSocketServer","installHandlers","on","client","send","write","terminate","close","clients","push","splice","indexOf","callback"],"sources":["C:/Users/Nawaz/Downloads/mean-stack-authentication-authorization-master/mean-stack-authentication-authorization-master/Frontend/node_modules/webpack-dev-server/lib/servers/SockJSServer.js"],"sourcesContent":["\"use strict\";\n\nconst sockjs = require(\"sockjs\");\nconst BaseServer = require(\"./BaseServer\");\n\n/** @typedef {import(\"../Server\").WebSocketServerConfiguration} WebSocketServerConfiguration */\n/** @typedef {import(\"../Server\").ClientConnection} ClientConnection */\n\n// Workaround for sockjs@~0.3.19\n// sockjs will remove Origin header, however Origin header is required for checking host.\n// See https://github.com/webpack/webpack-dev-server/issues/1604 for more information\n{\n  // @ts-ignore\n  const SockjsSession = require(\"sockjs/lib/transport\").Session;\n  const decorateConnection = SockjsSession.prototype.decorateConnection;\n\n  /**\n   * @param {import(\"http\").IncomingMessage} req\n   */\n  // eslint-disable-next-line func-names\n  SockjsSession.prototype.decorateConnection = function (req) {\n    decorateConnection.call(this, req);\n\n    const connection = this.connection;\n\n    if (\n      connection.headers &&\n      !(\"origin\" in connection.headers) &&\n      \"origin\" in req.headers\n    ) {\n      connection.headers.origin = req.headers.origin;\n    }\n  };\n}\n\nmodule.exports = class SockJSServer extends BaseServer {\n  // options has: error (function), debug (function), server (http/s server), path (string)\n  /**\n   * @param {import(\"../Server\")} server\n   */\n  constructor(server) {\n    super(server);\n\n    this.implementation = sockjs.createServer({\n      // Use provided up-to-date sockjs-client\n      sockjs_url: \"/__webpack_dev_server__/sockjs.bundle.js\",\n      // Default logger is very annoy. Limit useless logs.\n      /**\n       * @param {string} severity\n       * @param {string} line\n       */\n      log: (severity, line) => {\n        if (severity === \"error\") {\n          this.server.logger.error(line);\n        } else if (severity === \"info\") {\n          this.server.logger.log(line);\n        } else {\n          this.server.logger.debug(line);\n        }\n      },\n    });\n\n    /**\n     * @param {import(\"sockjs\").ServerOptions & { path?: string }} options\n     * @returns {string | undefined}\n     */\n    const getPrefix = (options) => {\n      if (typeof options.prefix !== \"undefined\") {\n        return options.prefix;\n      }\n\n      return options.path;\n    };\n\n    const options = {\n      .../** @type {WebSocketServerConfiguration} */\n      (this.server.options.webSocketServer).options,\n      prefix: getPrefix(\n        /** @type {NonNullable<WebSocketServerConfiguration[\"options\"]>} */\n        (\n          /** @type {WebSocketServerConfiguration} */\n          (this.server.options.webSocketServer).options\n        )\n      ),\n    };\n\n    this.implementation.installHandlers(\n      /** @type {import(\"http\").Server} */ (this.server.server),\n      options\n    );\n\n    this.implementation.on(\"connection\", (client) => {\n      // @ts-ignore\n      // Implement the the same API as for `ws`\n      client.send = client.write;\n      // @ts-ignore\n      client.terminate = client.close;\n\n      this.clients.push(/** @type {ClientConnection} */ (client));\n\n      client.on(\"close\", () => {\n        this.clients.splice(\n          this.clients.indexOf(/** @type {ClientConnection} */ (client)),\n          1\n        );\n      });\n    });\n\n    // @ts-ignore\n    this.implementation.close = (callback) => {\n      callback();\n    };\n  }\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,UAAU,GAAGD,OAAO,CAAC,cAAc,CAAC;;AAE1C;AACA;;AAEA;AACA;AACA;AACA;EACE;EACA,MAAME,aAAa,GAAGF,OAAO,CAAC,sBAAsB,CAAC,CAACG,OAAO;EAC7D,MAAMC,kBAAkB,GAAGF,aAAa,CAACG,SAAS,CAACD,kBAAkB;;EAErE;AACF;AACA;EACE;EACAF,aAAa,CAACG,SAAS,CAACD,kBAAkB,GAAG,UAAUE,GAAG,EAAE;IAC1DF,kBAAkB,CAACG,IAAI,CAAC,IAAI,EAAED,GAAG,CAAC;IAElC,MAAME,UAAU,GAAG,IAAI,CAACA,UAAU;IAElC,IACEA,UAAU,CAACC,OAAO,IAClB,EAAE,QAAQ,IAAID,UAAU,CAACC,OAAO,CAAC,IACjC,QAAQ,IAAIH,GAAG,CAACG,OAAO,EACvB;MACAD,UAAU,CAACC,OAAO,CAACC,MAAM,GAAGJ,GAAG,CAACG,OAAO,CAACC,MAAM;IAChD;EACF,CAAC;AACH;AAEAC,MAAM,CAACC,OAAO,GAAG,MAAMC,YAAY,SAASZ,UAAU,CAAC;EACrD;EACA;AACF;AACA;EACEa,WAAW,CAACC,MAAM,EAAE;IAClB,KAAK,CAACA,MAAM,CAAC;IAEb,IAAI,CAACC,cAAc,GAAGjB,MAAM,CAACkB,YAAY,CAAC;MACxC;MACAC,UAAU,EAAE,0CAA0C;MACtD;MACA;AACN;AACA;AACA;MACMC,GAAG,EAAE,CAACC,QAAQ,EAAEC,IAAI,KAAK;QACvB,IAAID,QAAQ,KAAK,OAAO,EAAE;UACxB,IAAI,CAACL,MAAM,CAACO,MAAM,CAACC,KAAK,CAACF,IAAI,CAAC;QAChC,CAAC,MAAM,IAAID,QAAQ,KAAK,MAAM,EAAE;UAC9B,IAAI,CAACL,MAAM,CAACO,MAAM,CAACH,GAAG,CAACE,IAAI,CAAC;QAC9B,CAAC,MAAM;UACL,IAAI,CAACN,MAAM,CAACO,MAAM,CAACE,KAAK,CAACH,IAAI,CAAC;QAChC;MACF;IACF,CAAC,CAAC;;IAEF;AACJ;AACA;AACA;IACI,MAAMI,SAAS,GAAIC,OAAO,IAAK;MAC7B,IAAI,OAAOA,OAAO,CAACC,MAAM,KAAK,WAAW,EAAE;QACzC,OAAOD,OAAO,CAACC,MAAM;MACvB;MAEA,OAAOD,OAAO,CAACE,IAAI;IACrB,CAAC;IAED,MAAMF,OAAO,GAAG;MACd,IAAG;MACF,IAAI,CAACX,MAAM,CAACW,OAAO,CAACG,eAAe,CAAEH,OAAO;MAC7CC,MAAM,EAAEF,SAAS,EACf;;MAEE;MACC,IAAI,CAACV,MAAM,CAACW,OAAO,CAACG,eAAe,CAAEH,OAAO;IAGnD,CAAC;IAED,IAAI,CAACV,cAAc,CAACc,eAAe,EACjC,oCAAsC,IAAI,CAACf,MAAM,CAACA,MAAM,EACxDW,OAAO,CACR;IAED,IAAI,CAACV,cAAc,CAACe,EAAE,CAAC,YAAY,EAAGC,MAAM,IAAK;MAC/C;MACA;MACAA,MAAM,CAACC,IAAI,GAAGD,MAAM,CAACE,KAAK;MAC1B;MACAF,MAAM,CAACG,SAAS,GAAGH,MAAM,CAACI,KAAK;MAE/B,IAAI,CAACC,OAAO,CAACC,IAAI,EAAC,+BAAiCN,MAAM,CAAE;MAE3DA,MAAM,CAACD,EAAE,CAAC,OAAO,EAAE,MAAM;QACvB,IAAI,CAACM,OAAO,CAACE,MAAM,CACjB,IAAI,CAACF,OAAO,CAACG,OAAO,EAAC,+BAAiCR,MAAM,CAAE,EAC9D,CAAC,CACF;MACH,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,IAAI,CAAChB,cAAc,CAACoB,KAAK,GAAIK,QAAQ,IAAK;MACxCA,QAAQ,EAAE;IACZ,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}