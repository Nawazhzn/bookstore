{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"../_services/storage.service\";\nimport * as i3 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(authService, storageService) {\n    this.authService = authService;\n    this.storageService = storageService;\n    this.form = {\n      username: null,\n      password: null\n    };\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.roles = [];\n  }\n  ngOnInit() {\n    if (this.storageService.isLoggedIn()) {\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n    }\n  }\n  onSubmit() {\n    const {\n      username,\n      password\n    } = this.form;\n    this.authService.login(username, password).subscribe({\n      next: data => {\n        this.storageService.saveUser(data);\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.storageService.getUser().roles;\n        this.reloadPage();\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.StorageService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 21,\n  vars: 0,\n  consts: [[1, \"fullcontent\"], [1, \"headings\"], [1, \"formbox\"], [\"id\", \"form\", \"action\", \"\", \"method\", \"post\"], [\"for\", \"\"], [\"type\", \"text\", \"name\", \"username\", 1, \"asd\"], [\"type\", \"password\", \"id\", \"\", \"name\", \"password\", 1, \"asd\"], [\"id\", \"btn\", \"type\", \"submit\", \"name\", \"submit\", \"value\", \"Log In\", 1, \"mainbox\"], [\"href\", \"register.html\", 1, \"mainbox\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n      i0.ɵɵtext(3, \"The Engineering Book Store\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"h2\");\n      i0.ɵɵtext(5, \"Welcome to the engineering book store.Here you can find all the books related to engineering.\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 2)(7, \"h3\");\n      i0.ɵɵtext(8, \"Log In\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"form\", 3)(10, \"label\", 4);\n      i0.ɵɵtext(11, \"Username\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 5);\n      i0.ɵɵelementStart(13, \"label\", 4);\n      i0.ɵɵtext(14, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 6)(16, \"input\", 7);\n      i0.ɵɵelementStart(17, \"label\", 4);\n      i0.ɵɵtext(18, \"New customer?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"a\", 8);\n      i0.ɵɵtext(20, \"Register Now\");\n      i0.ɵɵelementEnd()()()();\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n  styles: [\"@import url(https://fonts.googleapis.com/css?family=Dancing+Script|Lato);\\n[_ngcontent-%COMP%]:root{\\n    --primaryred:#ff424f;\\n    --secondaryred:#f84735;\\n    --lightblack:#222b31;\\n    --darkblack:#191c1f;\\n    --mainfont:'Dancing Script', cursive;\\n    --secondfont: 'Lato', sans-serif;\\n}\\nbody[_ngcontent-%COMP%]{\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tfont-size: 16px;\\n\\tline-height: 1.5;\\n\\tfont-family:var(--secondfont);\\n}\\n*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{\\n\\tbox-sizing: border-box;\\n}\\nimg[_ngcontent-%COMP%]{\\n\\tmax-width: 100%;\\n\\theight: auto;\\n}\\n.fullcontent[_ngcontent-%COMP%]{\\n    width:100%;\\n    min-height: 100vh;\\n    height: auto;\\n    padding:6% 10% 5% 10%;\\n    background-image: url(img/b.jpg);\\n    background:linear-gradient(rgba(0, 0, 0, 0.70), rgba(0, 0, 0, 0.70)),url(https://raw.githubusercontent.com/Poojavpatel/BookStoreApp/master/img/b.jpg);\\n    background-size: cover;\\n    background-position: 50% 50%;\\n    display: flex;\\n    flex-direction: row;\\n}\\n.headings[_ngcontent-%COMP%]{\\n     \\n    flex-basis: 65%;\\n    margin-right: 5%;\\n}\\n.headings[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{\\n    font-size: 4rem;\\n    font-family:var(--mainfont);\\n    color:white;\\n    margin:3% 0% 3% 0%;\\n}\\n.headings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{\\n\\tfont-size:1.2rem;\\n    font-weight: 300;\\n    color: rgba(255, 255, 255, 0.5);\\n}\\n.formbox[_ngcontent-%COMP%]{\\n    background:rgb(34,43,49,0.7);\\n    color:white;\\n    flex-basis: 35%;\\n    border-top: 10px solid var(--secondaryred);\\n    padding:2% 3%;\\n}\\n.formbox[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{\\n    margin: 0;\\n}\\n.formbox[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n    font-family: var(--mainfont);\\n    font-size: 1.5rem;\\n    margin-bottom: 1rem;\\n}\\n.formbox[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{\\n    color: rgba(255, 255, 255, 0.8);\\n    display: inline-block;\\n    max-width: 100%;\\n    margin-bottom: 0.3rem;\\n}\\n.formbox[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .asd[_ngcontent-%COMP%]{\\n    border: 2px solid rgba(255, 255, 255, 0.2);\\n    box-shadow: none;\\n    background: transparent;\\n    height: 2.8rem;\\n    display: block;\\n    width: 100%;\\n    border-radius: 4px;\\n    margin-bottom: 1rem;\\n}\\nform[_ngcontent-%COMP%]   .mainbox[_ngcontent-%COMP%]{\\n    color: white;\\n    box-shadow: none;\\n    background: var(--secondaryred);\\n    height: 2.8rem;\\n    display: block;\\n    width: 100%;\\n    border-radius: 4px;\\n    margin-bottom: 10px;\\n    text-align: center;\\n    text-decoration: none;\\n    border: none;\\n}\\na[_ngcontent-%COMP%]   .mainbox[_ngcontent-%COMP%]{\\n    margin: 0;\\n    padding: 2%;\\n}\\n/*# sourceURL=webpack://./src/app/login/login.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUF5Q0U7QUFLRjtJQUNJLG9CQUFvQjtJQUNwQixzQkFBc0I7SUFDdEIsb0JBQW9CO0lBQ3BCLG1CQUFtQjtJQUNuQixvQ0FBb0M7SUFDcEMsZ0NBQWdDO0FBQ3BDO0FBQ0E7Q0FDQyxTQUFTO0NBQ1QsVUFBVTtDQUNWLGVBQWU7Q0FDZixnQkFBZ0I7Q0FDaEIsNkJBQTZCO0FBQzlCO0FBQ0E7Q0FDQyxzQkFBc0I7QUFDdkI7QUFDQTtDQUNDLGVBQWU7Q0FDZixZQUFZO0FBQ2I7QUFDQTtJQUNJLFVBQVU7SUFDVixpQkFBaUI7SUFDakIsWUFBWTtJQUNaLHFCQUFxQjtJQUNyQixnQ0FBZ0M7SUFDaEMscUpBQXFKO0lBQ3JKLHNCQUFzQjtJQUN0Qiw0QkFBNEI7SUFDNUIsYUFBYTtJQUNiLG1CQUFtQjtBQUN2QjtBQUNBO0tBQ0sscUJBQXFCO0lBQ3RCLGVBQWU7SUFDZixnQkFBZ0I7QUFDcEI7QUFDQTtJQUNJLGVBQWU7SUFDZiwyQkFBMkI7SUFDM0IsV0FBVztJQUNYLGtCQUFrQjtBQUN0QjtBQUNBO0NBQ0MsZ0JBQWdCO0lBQ2IsZ0JBQWdCO0lBQ2hCLCtCQUErQjtBQUNuQztBQUNBO0lBQ0ksNEJBQTRCO0lBQzVCLFdBQVc7SUFDWCxlQUFlO0lBQ2YsMENBQTBDO0lBQzFDLGFBQWE7QUFDakI7QUFDQTtJQUNJLFNBQVM7QUFDYjtBQUNBO0lBQ0ksNEJBQTRCO0lBQzVCLGlCQUFpQjtJQUNqQixtQkFBbUI7QUFDdkI7QUFDQTtJQUNJLCtCQUErQjtJQUMvQixxQkFBcUI7SUFDckIsZUFBZTtJQUNmLHFCQUFxQjtBQUN6QjtBQUNBO0lBQ0ksMENBQTBDO0lBQzFDLGdCQUFnQjtJQUNoQix1QkFBdUI7SUFDdkIsY0FBYztJQUNkLGNBQWM7SUFDZCxXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLG1CQUFtQjtBQUN2QjtBQUNBO0lBQ0ksWUFBWTtJQUNaLGdCQUFnQjtJQUNoQiwrQkFBK0I7SUFDL0IsY0FBYztJQUNkLGNBQWM7SUFDZCxXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIscUJBQXFCO0lBQ3JCLFlBQVk7QUFDaEI7QUFDQTtJQUNJLFNBQVM7SUFDVCxXQUFXO0FBQ2YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAaW1wb3J0IFwifmJvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAuY3NzXCI7XG4vKlxubGFiZWwge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmNhcmQtY29udGFpbmVyLmNhcmQge1xuICBtYXgtd2lkdGg6IDQwMHB4ICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDQwcHggNDBweDtcbmJvcmRlci1yYWRpdXM6IDIwcHg7XG59XG5cbi5jYXJkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgcGFkZGluZzogMjBweCAyNXB4IDMwcHg7XG4gIG1hcmdpbjogMCBhdXRvIDI1cHg7XG4gIG1hcmdpbi10b3A6IDUwcHg7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogMnB4O1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDJweDtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAtbW96LWJveC1zaGFkb3c6IDBweCAycHggMnB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMnB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gIGJveC1zaGFkb3c6IDBweCAycHggMnB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbn1cblxuLnByb2ZpbGUtaW1nLWNhcmQge1xuICB3aWR0aDogOTZweDtcbiAgaGVpZ2h0OiA5NnB4O1xuICBtYXJnaW46IDAgYXV0byAxMHB4O1xuICBkaXNwbGF5OiBibG9jaztcbiAgLW1vei1ib3JkZXItcmFkaXVzOiA1MCU7XG4gIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNTAlO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG59XG5cbi5idG57XG4gICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjk3MDY4O1xuICAgYm9yZGVyOiAjZmZmZmZmO1xufVxuXG4gKi9cblxuXG5cbiBAaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PURhbmNpbmcrU2NyaXB0fExhdG8nKTtcbjpyb290e1xuICAgIC0tcHJpbWFyeXJlZDojZmY0MjRmO1xuICAgIC0tc2Vjb25kYXJ5cmVkOiNmODQ3MzU7XG4gICAgLS1saWdodGJsYWNrOiMyMjJiMzE7XG4gICAgLS1kYXJrYmxhY2s6IzE5MWMxZjtcbiAgICAtLW1haW5mb250OidEYW5jaW5nIFNjcmlwdCcsIGN1cnNpdmU7XG4gICAgLS1zZWNvbmRmb250OiAnTGF0bycsIHNhbnMtc2VyaWY7XG59XG5ib2R5e1xuXHRtYXJnaW46IDA7XG5cdHBhZGRpbmc6IDA7XG5cdGZvbnQtc2l6ZTogMTZweDtcblx0bGluZS1oZWlnaHQ6IDEuNTtcblx0Zm9udC1mYW1pbHk6dmFyKC0tc2Vjb25kZm9udCk7XG59XG4qLCo6YmVmb3JlLCo6YWZ0ZXJ7XG5cdGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5pbWd7XG5cdG1heC13aWR0aDogMTAwJTtcblx0aGVpZ2h0OiBhdXRvO1xufVxuLmZ1bGxjb250ZW50e1xuICAgIHdpZHRoOjEwMCU7XG4gICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgaGVpZ2h0OiBhdXRvO1xuICAgIHBhZGRpbmc6NiUgMTAlIDUlIDEwJTtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoaW1nL2IuanBnKTtcbiAgICBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudChyZ2JhKDAsIDAsIDAsIDAuNzApLCByZ2JhKDAsIDAsIDAsIDAuNzApKSx1cmwoaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1Bvb2phdnBhdGVsL0Jvb2tTdG9yZUFwcC9tYXN0ZXIvaW1nL2IuanBnKTtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IDUwJSA1MCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xufVxuLmhlYWRpbmdze1xuICAgICAvKiBiYWNrZ3JvdW5kOnJlZDsgICovXG4gICAgZmxleC1iYXNpczogNjUlO1xuICAgIG1hcmdpbi1yaWdodDogNSU7XG59XG4uaGVhZGluZ3MgaDF7XG4gICAgZm9udC1zaXplOiA0cmVtO1xuICAgIGZvbnQtZmFtaWx5OnZhcigtLW1haW5mb250KTtcbiAgICBjb2xvcjp3aGl0ZTtcbiAgICBtYXJnaW46MyUgMCUgMyUgMCU7XG59XG4uaGVhZGluZ3MgaDJ7XG5cdGZvbnQtc2l6ZToxLjJyZW07XG4gICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpO1xufVxuLmZvcm1ib3h7XG4gICAgYmFja2dyb3VuZDpyZ2IoMzQsNDMsNDksMC43KTtcbiAgICBjb2xvcjp3aGl0ZTtcbiAgICBmbGV4LWJhc2lzOiAzNSU7XG4gICAgYm9yZGVyLXRvcDogMTBweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnlyZWQpO1xuICAgIHBhZGRpbmc6MiUgMyU7XG59XG4uZm9ybWJveCAqe1xuICAgIG1hcmdpbjogMDtcbn1cbi5mb3JtYm94IGgze1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1tYWluZm9udCk7XG4gICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbn1cbi5mb3JtYm94IGZvcm0gbGFiZWx7XG4gICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIG1hcmdpbi1ib3R0b206IDAuM3JlbTtcbn1cbi5mb3JtYm94IGZvcm0gLmFzZHtcbiAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICBoZWlnaHQ6IDIuOHJlbTtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbn1cbmZvcm0gLm1haW5ib3h7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5cmVkKTtcbiAgICBoZWlnaHQ6IDIuOHJlbTtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbn1cbmEgLm1haW5ib3h7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDIlO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;AASA,OAAM,MAAOA,cAAc;EAUzBC,YAAoBC,WAAwB,EAAUC,cAA8B;IAAhE,gBAAW,GAAXD,WAAW;IAAuB,mBAAc,GAAdC,cAAc;IATpE,SAAI,GAAQ;MACVC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAE;KACX;IACD,eAAU,GAAG,KAAK;IAClB,kBAAa,GAAG,KAAK;IACrB,iBAAY,GAAG,EAAE;IACjB,UAAK,GAAa,EAAE;EAEoE;EAExFC,QAAQ;IACN,IAAI,IAAI,CAACH,cAAc,CAACI,UAAU,EAAE,EAAE;MACpC,IAAI,CAACA,UAAU,GAAG,IAAI;MACtB,IAAI,CAACC,KAAK,GAAG,IAAI,CAACL,cAAc,CAACM,OAAO,EAAE,CAACD,KAAK;;EAEpD;EAEAE,QAAQ;IACN,MAAM;MAAEN,QAAQ;MAAEC;IAAQ,CAAE,GAAG,IAAI,CAACM,IAAI;IAExC,IAAI,CAACT,WAAW,CAACU,KAAK,CAACR,QAAQ,EAAEC,QAAQ,CAAC,CAACQ,SAAS,CAAC;MACnDC,IAAI,EAAEC,IAAI,IAAG;QACX,IAAI,CAACZ,cAAc,CAACa,QAAQ,CAACD,IAAI,CAAC;QAElC,IAAI,CAACE,aAAa,GAAG,KAAK;QAC1B,IAAI,CAACV,UAAU,GAAG,IAAI;QACtB,IAAI,CAACC,KAAK,GAAG,IAAI,CAACL,cAAc,CAACM,OAAO,EAAE,CAACD,KAAK;QAChD,IAAI,CAACU,UAAU,EAAE;MACnB,CAAC;MACDC,KAAK,EAAEC,GAAG,IAAG;QACX,IAAI,CAACC,YAAY,GAAGD,GAAG,CAACD,KAAK,CAACG,OAAO;QACrC,IAAI,CAACL,aAAa,GAAG,IAAI;MAC3B;KACD,CAAC;EACJ;EAEAC,UAAU;IACRK,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAC1B;;;mBAxCWzB,cAAc;AAAA;;QAAdA,cAAc;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCP3BC,8BAAyB;MAEfA,0CAA0B;MAAAA,iBAAK;MACnCA,0BAAI;MAAAA,6GAA+F;MAAAA,iBAAK;MAE5GA,8BAAqB;MACbA,sBAAM;MAAAA,iBAAK;MACfA,+BAAwC;MACtBA,yBAAQ;MAAAA,iBAAQ;MAC9BA,4BAAgD;MAChDA,iCAAc;MAAAA,yBAAQ;MAAAA,iBAAQ;MAC9BA,4BAA0D;MAE1DA,iCAAc;MAAAA,8BAAa;MAAAA,iBAAQ;MACnCA,6BAAwC;MAAAA,6BAAY;MAAAA,iBAAI","names":["LoginComponent","constructor","authService","storageService","username","password","ngOnInit","isLoggedIn","roles","getUser","onSubmit","form","login","subscribe","next","data","saveUser","isLoginFailed","reloadPage","error","err","errorMessage","message","window","location","reload","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["C:\\Users\\Nawaz\\Downloads\\mean-stack-authentication-authorization-master\\mean-stack-authentication-authorization-master\\frontend\\src\\app\\login\\login.component.ts","C:\\Users\\Nawaz\\Downloads\\mean-stack-authentication-authorization-master\\mean-stack-authentication-authorization-master\\frontend\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../_services/auth.service';\nimport { StorageService } from '../_services/storage.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n  form: any = {\n    username: null,\n    password: null\n  };\n  isLoggedIn = false;\n  isLoginFailed = false;\n  errorMessage = '';\n  roles: string[] = [];\n\n  constructor(private authService: AuthService, private storageService: StorageService) { }\n\n  ngOnInit(): void {\n    if (this.storageService.isLoggedIn()) {\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n    }\n  }\n\n  onSubmit(): void {\n    const { username, password } = this.form;\n\n    this.authService.login(username, password).subscribe({\n      next: data => {\n        this.storageService.saveUser(data);\n\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.storageService.getUser().roles;\n        this.reloadPage();\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n\n  reloadPage(): void {\n    window.location.reload();\n  }\n}\n","\n\n<div class=\"fullcontent\">\n  <div class=\"headings\">\n      <h1>The Engineering Book Store</h1>\n      <h2>Welcome to the engineering book store.Here you  can find  all the books related to engineering.</h2>\n  </div>\n  <div class=\"formbox\">\n      <h3>Log In</h3>\n      <form id=\"form\" action=\"\" method=\"post\">\n          <label for=\"\">Username</label>\n          <input type=\"text\" name=\"username\" class=\"asd\"/>\n          <label for=\"\">Password</label>\n          <input type=\"password\" id=\"\" name=\"password\" class=\"asd\"/>\n          <input id=\"btn\" type=\"submit\" name=\"submit\" value=\"Log In\" class=\"mainbox\">\n          <label for=\"\">New customer?</label>\n          <a href=\"register.html\" class=\"mainbox\">Register Now</a>\n      </form>\n  </div>\n</div>\n\n\n\n\n\n\n\n\n<!--\n<body>\n        <div class=\"containermain\">\n\n          <div class=\"col-md-12\">\n            <div class=\"card card-container\">\n              <img\n                id=\"profile-img\"\n                src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n                class=\"profile-img-card\"\n              />\n              <form\n                *ngIf=\"!isLoggedIn\"\n                name=\"form\"\n                (ngSubmit)=\"f.form.valid && onSubmit()\"\n                #f=\"ngForm\"\n                novalidate\n              >\n                <div class=\"form-group\">\n                  <label for=\"username\">Username</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    name=\"username\"\n                    [(ngModel)]=\"form.username\"\n                    required\n                    #username=\"ngModel\"\n                    [ngClass]=\"{ 'is-invalid': f.submitted && username.errors }\"\n                  />\n                  <div *ngIf=\"username.errors && f.submitted\" class=\"invalid-feedback\">\n                    Username is required!\n                  </div>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"password\">Password</label>\n                  <input\n                    type=\"password\"\n                    class=\"form-control\"\n                    name=\"password\"\n                    [(ngModel)]=\"form.password\"\n                    required\n                    minlength=\"6\"\n                    #password=\"ngModel\"\n                    [ngClass]=\"{ 'is-invalid': f.submitted && password.errors }\"\n                  />\n                  <div *ngIf=\"password.errors && f.submitted\" class=\"invalid-feedback\">\n                    <div *ngIf=\"password.errors['required']\">Password is required</div>\n                    <div *ngIf=\"password.errors['minlength']\">\n                      Password must be at least 6 characters\n                    </div>\n                  </div>\n                </div>\n                <div class=\"form-group\">\n                  <button class=\"btn btn-primary btn-block\">\n                    Login\n                  </button>\n                </div>\n                <div class=\"form-group\">\n                  <div *ngIf=\"f.submitted && isLoginFailed\" class=\"alert alert-danger\" role=\"alert\">\n                    Login failed: {{ errorMessage }}\n                  </div>\n                </div>\n              </form>\n\n              <div class=\"alert alert-success\" *ngIf=\"isLoggedIn\">\n                Logged in as {{ roles }}.\n              </div>\n            </div>\n          </div>\n          </div>\n</body> -->\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}