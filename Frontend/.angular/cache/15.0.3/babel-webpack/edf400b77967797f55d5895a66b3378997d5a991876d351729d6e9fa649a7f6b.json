{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _asyncToGenerator = require(\"C:/Users/Nawaz/Downloads/mean-stack-authentication-authorization-master/mean-stack-authentication-authorization-master/Frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.buildWebpackBrowser = exports.BUILD_TIMEOUT = void 0;\nconst architect_1 = require(\"@angular-devkit/architect\");\nconst build_webpack_1 = require(\"@angular-devkit/build-webpack\");\nconst fs = __importStar(require(\"fs\"));\nconst path = __importStar(require(\"path\"));\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst utils_1 = require(\"../../utils\");\nconst bundle_calculator_1 = require(\"../../utils/bundle-calculator\");\nconst color_1 = require(\"../../utils/color\");\nconst copy_assets_1 = require(\"../../utils/copy-assets\");\nconst error_1 = require(\"../../utils/error\");\nconst i18n_inlining_1 = require(\"../../utils/i18n-inlining\");\nconst index_html_generator_1 = require(\"../../utils/index-file/index-html-generator\");\nconst normalize_cache_1 = require(\"../../utils/normalize-cache\");\nconst output_paths_1 = require(\"../../utils/output-paths\");\nconst package_chunk_sort_1 = require(\"../../utils/package-chunk-sort\");\nconst purge_cache_1 = require(\"../../utils/purge-cache\");\nconst service_worker_1 = require(\"../../utils/service-worker\");\nconst spinner_1 = require(\"../../utils/spinner\");\nconst version_1 = require(\"../../utils/version\");\nconst webpack_browser_config_1 = require(\"../../utils/webpack-browser-config\");\nconst configs_1 = require(\"../../webpack/configs\");\nconst async_chunks_1 = require(\"../../webpack/utils/async-chunks\");\nconst helpers_1 = require(\"../../webpack/utils/helpers\");\nconst stats_1 = require(\"../../webpack/utils/stats\");\n/**\n * Maximum time in milliseconds for single build/rebuild\n * This accounts for CI variability.\n */\nexports.BUILD_TIMEOUT = 30000;\nfunction initialize(_x, _x2, _x3) {\n  return _initialize.apply(this, arguments);\n}\n/**\n * @experimental Direct usage of this function is considered experimental.\n */\n// eslint-disable-next-line max-lines-per-function\nfunction _initialize() {\n  _initialize = _asyncToGenerator(function* (options, context, webpackConfigurationTransform) {\n    var _a, _b;\n    const originalOutputPath = options.outputPath;\n    // Assets are processed directly by the builder except when watching\n    const adjustedOptions = options.watch ? options : {\n      ...options,\n      assets: []\n    };\n    const {\n      config,\n      projectRoot,\n      projectSourceRoot,\n      i18n\n    } = yield (0, webpack_browser_config_1.generateI18nBrowserWebpackConfigFromContext)(adjustedOptions, context, wco => [(0, configs_1.getCommonConfig)(wco), (0, configs_1.getStylesConfig)(wco)]);\n    // Validate asset option values if processed directly\n    if (((_a = options.assets) === null || _a === void 0 ? void 0 : _a.length) && !((_b = adjustedOptions.assets) === null || _b === void 0 ? void 0 : _b.length)) {\n      (0, utils_1.normalizeAssetPatterns)(options.assets, context.workspaceRoot, projectRoot, projectSourceRoot).forEach(({\n        output\n      }) => {\n        if (output.startsWith('..')) {\n          throw new Error('An asset cannot be written to a location outside of the output path.');\n        }\n      });\n    }\n    let transformedConfig;\n    if (webpackConfigurationTransform) {\n      transformedConfig = yield webpackConfigurationTransform(config);\n    }\n    if (options.deleteOutputPath) {\n      (0, utils_1.deleteOutputDir)(context.workspaceRoot, originalOutputPath);\n    }\n    return {\n      config: transformedConfig || config,\n      projectRoot,\n      projectSourceRoot,\n      i18n\n    };\n  });\n  return _initialize.apply(this, arguments);\n}\nfunction buildWebpackBrowser(options, context, transforms = {}) {\n  var _a;\n  const projectName = (_a = context.target) === null || _a === void 0 ? void 0 : _a.project;\n  if (!projectName) {\n    throw new Error('The builder requires a target.');\n  }\n  const baseOutputPath = path.resolve(context.workspaceRoot, options.outputPath);\n  let outputPaths;\n  // Check Angular version.\n  (0, version_1.assertCompatibleAngularVersion)(context.workspaceRoot);\n  return (0, rxjs_1.from)(context.getProjectMetadata(projectName)).pipe((0, operators_1.switchMap)( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (projectMetadata) {\n      var _a;\n      var _b;\n      // Purge old build disk cache.\n      yield (0, purge_cache_1.purgeStaleBuildCache)(context);\n      // Initialize builder\n      const initialization = yield initialize(options, context, transforms.webpackConfiguration);\n      // Add index file to watched files.\n      if (options.watch) {\n        const indexInputFile = path.join(context.workspaceRoot, (0, webpack_browser_config_1.getIndexInputFile)(options.index));\n        (_a = (_b = initialization.config).plugins) !== null && _a !== void 0 ? _a : _b.plugins = [];\n        initialization.config.plugins.push({\n          apply: compiler => {\n            compiler.hooks.thisCompilation.tap('build-angular', compilation => {\n              compilation.fileDependencies.add(indexInputFile);\n            });\n          }\n        });\n      }\n      return {\n        ...initialization,\n        cacheOptions: (0, normalize_cache_1.normalizeCacheOptions)(projectMetadata, context.workspaceRoot)\n      };\n    });\n    return function (_x4) {\n      return _ref.apply(this, arguments);\n    };\n  }()), (0, operators_1.switchMap)(\n  // eslint-disable-next-line max-lines-per-function\n  ({\n    config,\n    projectRoot,\n    projectSourceRoot,\n    i18n,\n    cacheOptions\n  }) => {\n    const normalizedOptimization = (0, utils_1.normalizeOptimization)(options.optimization);\n    return (0, build_webpack_1.runWebpack)(config, context, {\n      webpackFactory: require('webpack'),\n      logging: transforms.logging || ((stats, config) => {\n        if (options.verbose) {\n          context.logger.info(stats.toString(config.stats));\n        }\n      })\n    }).pipe((0, operators_1.concatMap)(\n    /*#__PURE__*/\n    // eslint-disable-next-line max-lines-per-function\n    function () {\n      var _ref2 = _asyncToGenerator(function* (buildEvent) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const spinner = new spinner_1.Spinner();\n        spinner.enabled = options.progress !== false;\n        const {\n          success,\n          emittedFiles = [],\n          outputPath: webpackOutputPath\n        } = buildEvent;\n        const webpackRawStats = buildEvent.webpackStats;\n        if (!webpackRawStats) {\n          throw new Error('Webpack stats build result is required.');\n        }\n        // Fix incorrectly set `initial` value on chunks.\n        const extraEntryPoints = [...(0, helpers_1.normalizeExtraEntryPoints)(options.styles || [], 'styles'), ...(0, helpers_1.normalizeExtraEntryPoints)(options.scripts || [], 'scripts')];\n        const webpackStats = {\n          ...webpackRawStats,\n          chunks: (0, async_chunks_1.markAsyncChunksNonInitial)(webpackRawStats, extraEntryPoints)\n        };\n        if (!success) {\n          // If using bundle downleveling then there is only one build\n          // If it fails show any diagnostic messages and bail\n          if ((0, stats_1.statsHasWarnings)(webpackStats)) {\n            context.logger.warn((0, stats_1.statsWarningsToString)(webpackStats, {\n              colors: true\n            }));\n          }\n          if ((0, stats_1.statsHasErrors)(webpackStats)) {\n            context.logger.error((0, stats_1.statsErrorsToString)(webpackStats, {\n              colors: true\n            }));\n          }\n          return {\n            webpackStats: webpackRawStats,\n            output: {\n              success: false\n            }\n          };\n        } else {\n          outputPaths = (0, output_paths_1.ensureOutputPaths)(baseOutputPath, i18n);\n          const scriptsEntryPointName = (0, helpers_1.normalizeExtraEntryPoints)(options.scripts || [], 'scripts').map(x => x.bundleName);\n          if (i18n.shouldInline) {\n            const success = yield (0, i18n_inlining_1.i18nInlineEmittedFiles)(context, emittedFiles, i18n, baseOutputPath, Array.from(outputPaths.values()), scriptsEntryPointName, webpackOutputPath, options.i18nMissingTranslation);\n            if (!success) {\n              return {\n                webpackStats: webpackRawStats,\n                output: {\n                  success: false\n                }\n              };\n            }\n          }\n          // Check for budget errors and display them to the user.\n          const budgets = options.budgets;\n          let budgetFailures;\n          if (budgets === null || budgets === void 0 ? void 0 : budgets.length) {\n            budgetFailures = [...(0, bundle_calculator_1.checkBudgets)(budgets, webpackStats)];\n            for (const {\n              severity,\n              message\n            } of budgetFailures) {\n              switch (severity) {\n                case bundle_calculator_1.ThresholdSeverity.Warning:\n                  (_a = webpackStats.warnings) === null || _a === void 0 ? void 0 : _a.push({\n                    message\n                  });\n                  break;\n                case bundle_calculator_1.ThresholdSeverity.Error:\n                  (_b = webpackStats.errors) === null || _b === void 0 ? void 0 : _b.push({\n                    message\n                  });\n                  break;\n                default:\n                  assertNever(severity);\n              }\n            }\n          }\n          const buildSuccess = success && !(0, stats_1.statsHasErrors)(webpackStats);\n          if (buildSuccess) {\n            // Copy assets\n            if (!options.watch && ((_c = options.assets) === null || _c === void 0 ? void 0 : _c.length)) {\n              spinner.start('Copying assets...');\n              try {\n                yield (0, copy_assets_1.copyAssets)((0, utils_1.normalizeAssetPatterns)(options.assets, context.workspaceRoot, projectRoot, projectSourceRoot), Array.from(outputPaths.values()), context.workspaceRoot);\n                spinner.succeed('Copying assets complete.');\n              } catch (err) {\n                spinner.fail(color_1.colors.redBright('Copying of assets failed.'));\n                (0, error_1.assertIsError)(err);\n                return {\n                  output: {\n                    success: false,\n                    error: 'Unable to copy assets: ' + err.message\n                  },\n                  webpackStats: webpackRawStats\n                };\n              }\n            }\n            if (options.index) {\n              spinner.start('Generating index html...');\n              const entrypoints = (0, package_chunk_sort_1.generateEntryPoints)({\n                scripts: (_d = options.scripts) !== null && _d !== void 0 ? _d : [],\n                styles: (_e = options.styles) !== null && _e !== void 0 ? _e : []\n              });\n              const indexHtmlGenerator = new index_html_generator_1.IndexHtmlGenerator({\n                cache: cacheOptions,\n                indexPath: path.join(context.workspaceRoot, (0, webpack_browser_config_1.getIndexInputFile)(options.index)),\n                entrypoints,\n                deployUrl: options.deployUrl,\n                sri: options.subresourceIntegrity,\n                optimization: normalizedOptimization,\n                crossOrigin: options.crossOrigin,\n                postTransform: transforms.indexHtml\n              });\n              let hasErrors = false;\n              for (const [locale, outputPath] of outputPaths.entries()) {\n                try {\n                  const {\n                    content,\n                    warnings,\n                    errors\n                  } = yield indexHtmlGenerator.process({\n                    baseHref: (_f = getLocaleBaseHref(i18n, locale)) !== null && _f !== void 0 ? _f : options.baseHref,\n                    // i18nLocale is used when Ivy is disabled\n                    lang: locale || undefined,\n                    outputPath,\n                    files: mapEmittedFilesToFileInfo(emittedFiles)\n                  });\n                  if (warnings.length || errors.length) {\n                    spinner.stop();\n                    warnings.forEach(m => context.logger.warn(m));\n                    errors.forEach(m => {\n                      context.logger.error(m);\n                      hasErrors = true;\n                    });\n                    spinner.start();\n                  }\n                  const indexOutput = path.join(outputPath, (0, webpack_browser_config_1.getIndexOutputFile)(options.index));\n                  yield fs.promises.mkdir(path.dirname(indexOutput), {\n                    recursive: true\n                  });\n                  yield fs.promises.writeFile(indexOutput, content);\n                } catch (error) {\n                  spinner.fail('Index html generation failed.');\n                  (0, error_1.assertIsError)(error);\n                  return {\n                    webpackStats: webpackRawStats,\n                    output: {\n                      success: false,\n                      error: error.message\n                    }\n                  };\n                }\n              }\n              if (hasErrors) {\n                spinner.fail('Index html generation failed.');\n                return {\n                  webpackStats: webpackRawStats,\n                  output: {\n                    success: false\n                  }\n                };\n              } else {\n                spinner.succeed('Index html generation complete.');\n              }\n            }\n            if (options.serviceWorker) {\n              spinner.start('Generating service worker...');\n              for (const [locale, outputPath] of outputPaths.entries()) {\n                try {\n                  yield (0, service_worker_1.augmentAppWithServiceWorker)(projectRoot, context.workspaceRoot, outputPath, (_h = (_g = getLocaleBaseHref(i18n, locale)) !== null && _g !== void 0 ? _g : options.baseHref) !== null && _h !== void 0 ? _h : '/', options.ngswConfigPath);\n                } catch (error) {\n                  spinner.fail('Service worker generation failed.');\n                  (0, error_1.assertIsError)(error);\n                  return {\n                    webpackStats: webpackRawStats,\n                    output: {\n                      success: false,\n                      error: error.message\n                    }\n                  };\n                }\n              }\n              spinner.succeed('Service worker generation complete.');\n            }\n          }\n          (0, stats_1.webpackStatsLogger)(context.logger, webpackStats, config, budgetFailures);\n          return {\n            webpackStats: webpackRawStats,\n            output: {\n              success: buildSuccess\n            }\n          };\n        }\n      });\n      return function (_x5) {\n        return _ref2.apply(this, arguments);\n      };\n    }()), (0, operators_1.map)(({\n      output: event,\n      webpackStats\n    }) => ({\n      ...event,\n      stats: (0, stats_1.generateBuildEventStats)(webpackStats, options),\n      baseOutputPath,\n      outputPath: baseOutputPath,\n      outputPaths: outputPaths && Array.from(outputPaths.values()) || [baseOutputPath],\n      outputs: outputPaths && [...outputPaths.entries()].map(([locale, path]) => {\n        var _a;\n        return {\n          locale,\n          path,\n          baseHref: (_a = getLocaleBaseHref(i18n, locale)) !== null && _a !== void 0 ? _a : options.baseHref\n        };\n      }) || {\n        path: baseOutputPath,\n        baseHref: options.baseHref\n      }\n    })));\n  }));\n  function getLocaleBaseHref(i18n, locale) {\n    var _a, _b;\n    if (i18n.locales[locale] && ((_a = i18n.locales[locale]) === null || _a === void 0 ? void 0 : _a.baseHref) !== '') {\n      return (0, utils_1.urlJoin)(options.baseHref || '', (_b = i18n.locales[locale].baseHref) !== null && _b !== void 0 ? _b : `/${locale}/`);\n    }\n    return undefined;\n  }\n}\nexports.buildWebpackBrowser = buildWebpackBrowser;\nfunction assertNever(input) {\n  throw new Error(`Unexpected call to assertNever() with input: ${JSON.stringify(input, null /* replacer */, 4 /* tabSize */)}`);\n}\nfunction mapEmittedFilesToFileInfo(files = []) {\n  const filteredFiles = [];\n  for (const {\n    file,\n    name,\n    extension,\n    initial\n  } of files) {\n    if (name && initial) {\n      filteredFiles.push({\n        file,\n        extension,\n        name\n      });\n    }\n  }\n  return filteredFiles;\n}\nexports.default = (0, architect_1.createBuilder)(buildWebpackBrowser);","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","buildWebpackBrowser","BUILD_TIMEOUT","architect_1","require","build_webpack_1","fs","path","rxjs_1","operators_1","utils_1","bundle_calculator_1","color_1","copy_assets_1","error_1","i18n_inlining_1","index_html_generator_1","normalize_cache_1","output_paths_1","package_chunk_sort_1","purge_cache_1","service_worker_1","spinner_1","version_1","webpack_browser_config_1","configs_1","async_chunks_1","helpers_1","stats_1","initialize","options","context","webpackConfigurationTransform","_a","_b","originalOutputPath","outputPath","adjustedOptions","watch","assets","config","projectRoot","projectSourceRoot","i18n","generateI18nBrowserWebpackConfigFromContext","wco","getCommonConfig","getStylesConfig","length","normalizeAssetPatterns","workspaceRoot","forEach","output","startsWith","Error","transformedConfig","deleteOutputPath","deleteOutputDir","transforms","projectName","target","project","baseOutputPath","resolve","outputPaths","assertCompatibleAngularVersion","from","getProjectMetadata","pipe","switchMap","projectMetadata","purgeStaleBuildCache","initialization","webpackConfiguration","indexInputFile","join","getIndexInputFile","index","plugins","push","apply","compiler","hooks","thisCompilation","tap","compilation","fileDependencies","add","cacheOptions","normalizeCacheOptions","normalizedOptimization","normalizeOptimization","optimization","runWebpack","webpackFactory","logging","stats","verbose","logger","info","toString","concatMap","buildEvent","_c","_d","_e","_f","_g","_h","spinner","Spinner","enabled","progress","success","emittedFiles","webpackOutputPath","webpackRawStats","webpackStats","extraEntryPoints","normalizeExtraEntryPoints","styles","scripts","chunks","markAsyncChunksNonInitial","statsHasWarnings","warn","statsWarningsToString","colors","statsHasErrors","error","statsErrorsToString","ensureOutputPaths","scriptsEntryPointName","map","x","bundleName","shouldInline","i18nInlineEmittedFiles","Array","values","i18nMissingTranslation","budgets","budgetFailures","checkBudgets","severity","message","ThresholdSeverity","Warning","warnings","errors","assertNever","buildSuccess","start","copyAssets","succeed","err","fail","redBright","assertIsError","entrypoints","generateEntryPoints","indexHtmlGenerator","IndexHtmlGenerator","cache","indexPath","deployUrl","sri","subresourceIntegrity","crossOrigin","postTransform","indexHtml","hasErrors","locale","entries","content","process","baseHref","getLocaleBaseHref","lang","files","mapEmittedFilesToFileInfo","stop","indexOutput","getIndexOutputFile","promises","mkdir","dirname","recursive","writeFile","serviceWorker","augmentAppWithServiceWorker","ngswConfigPath","webpackStatsLogger","event","generateBuildEventStats","outputs","locales","urlJoin","input","JSON","stringify","filteredFiles","file","name","extension","initial","default","createBuilder"],"sources":["C:/Users/Nawaz/Downloads/mean-stack-authentication-authorization-master/mean-stack-authentication-authorization-master/Frontend/node_modules/@angular-devkit/build-angular/src/builders/browser/index.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildWebpackBrowser = exports.BUILD_TIMEOUT = void 0;\nconst architect_1 = require(\"@angular-devkit/architect\");\nconst build_webpack_1 = require(\"@angular-devkit/build-webpack\");\nconst fs = __importStar(require(\"fs\"));\nconst path = __importStar(require(\"path\"));\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst utils_1 = require(\"../../utils\");\nconst bundle_calculator_1 = require(\"../../utils/bundle-calculator\");\nconst color_1 = require(\"../../utils/color\");\nconst copy_assets_1 = require(\"../../utils/copy-assets\");\nconst error_1 = require(\"../../utils/error\");\nconst i18n_inlining_1 = require(\"../../utils/i18n-inlining\");\nconst index_html_generator_1 = require(\"../../utils/index-file/index-html-generator\");\nconst normalize_cache_1 = require(\"../../utils/normalize-cache\");\nconst output_paths_1 = require(\"../../utils/output-paths\");\nconst package_chunk_sort_1 = require(\"../../utils/package-chunk-sort\");\nconst purge_cache_1 = require(\"../../utils/purge-cache\");\nconst service_worker_1 = require(\"../../utils/service-worker\");\nconst spinner_1 = require(\"../../utils/spinner\");\nconst version_1 = require(\"../../utils/version\");\nconst webpack_browser_config_1 = require(\"../../utils/webpack-browser-config\");\nconst configs_1 = require(\"../../webpack/configs\");\nconst async_chunks_1 = require(\"../../webpack/utils/async-chunks\");\nconst helpers_1 = require(\"../../webpack/utils/helpers\");\nconst stats_1 = require(\"../../webpack/utils/stats\");\n/**\n * Maximum time in milliseconds for single build/rebuild\n * This accounts for CI variability.\n */\nexports.BUILD_TIMEOUT = 30000;\nasync function initialize(options, context, webpackConfigurationTransform) {\n    var _a, _b;\n    const originalOutputPath = options.outputPath;\n    // Assets are processed directly by the builder except when watching\n    const adjustedOptions = options.watch ? options : { ...options, assets: [] };\n    const { config, projectRoot, projectSourceRoot, i18n } = await (0, webpack_browser_config_1.generateI18nBrowserWebpackConfigFromContext)(adjustedOptions, context, (wco) => [\n        (0, configs_1.getCommonConfig)(wco),\n        (0, configs_1.getStylesConfig)(wco),\n    ]);\n    // Validate asset option values if processed directly\n    if (((_a = options.assets) === null || _a === void 0 ? void 0 : _a.length) && !((_b = adjustedOptions.assets) === null || _b === void 0 ? void 0 : _b.length)) {\n        (0, utils_1.normalizeAssetPatterns)(options.assets, context.workspaceRoot, projectRoot, projectSourceRoot).forEach(({ output }) => {\n            if (output.startsWith('..')) {\n                throw new Error('An asset cannot be written to a location outside of the output path.');\n            }\n        });\n    }\n    let transformedConfig;\n    if (webpackConfigurationTransform) {\n        transformedConfig = await webpackConfigurationTransform(config);\n    }\n    if (options.deleteOutputPath) {\n        (0, utils_1.deleteOutputDir)(context.workspaceRoot, originalOutputPath);\n    }\n    return { config: transformedConfig || config, projectRoot, projectSourceRoot, i18n };\n}\n/**\n * @experimental Direct usage of this function is considered experimental.\n */\n// eslint-disable-next-line max-lines-per-function\nfunction buildWebpackBrowser(options, context, transforms = {}) {\n    var _a;\n    const projectName = (_a = context.target) === null || _a === void 0 ? void 0 : _a.project;\n    if (!projectName) {\n        throw new Error('The builder requires a target.');\n    }\n    const baseOutputPath = path.resolve(context.workspaceRoot, options.outputPath);\n    let outputPaths;\n    // Check Angular version.\n    (0, version_1.assertCompatibleAngularVersion)(context.workspaceRoot);\n    return (0, rxjs_1.from)(context.getProjectMetadata(projectName)).pipe((0, operators_1.switchMap)(async (projectMetadata) => {\n        var _a;\n        var _b;\n        // Purge old build disk cache.\n        await (0, purge_cache_1.purgeStaleBuildCache)(context);\n        // Initialize builder\n        const initialization = await initialize(options, context, transforms.webpackConfiguration);\n        // Add index file to watched files.\n        if (options.watch) {\n            const indexInputFile = path.join(context.workspaceRoot, (0, webpack_browser_config_1.getIndexInputFile)(options.index));\n            (_a = (_b = initialization.config).plugins) !== null && _a !== void 0 ? _a : (_b.plugins = []);\n            initialization.config.plugins.push({\n                apply: (compiler) => {\n                    compiler.hooks.thisCompilation.tap('build-angular', (compilation) => {\n                        compilation.fileDependencies.add(indexInputFile);\n                    });\n                },\n            });\n        }\n        return {\n            ...initialization,\n            cacheOptions: (0, normalize_cache_1.normalizeCacheOptions)(projectMetadata, context.workspaceRoot),\n        };\n    }), (0, operators_1.switchMap)(\n    // eslint-disable-next-line max-lines-per-function\n    ({ config, projectRoot, projectSourceRoot, i18n, cacheOptions }) => {\n        const normalizedOptimization = (0, utils_1.normalizeOptimization)(options.optimization);\n        return (0, build_webpack_1.runWebpack)(config, context, {\n            webpackFactory: require('webpack'),\n            logging: transforms.logging ||\n                ((stats, config) => {\n                    if (options.verbose) {\n                        context.logger.info(stats.toString(config.stats));\n                    }\n                }),\n        }).pipe((0, operators_1.concatMap)(\n        // eslint-disable-next-line max-lines-per-function\n        async (buildEvent) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            const spinner = new spinner_1.Spinner();\n            spinner.enabled = options.progress !== false;\n            const { success, emittedFiles = [], outputPath: webpackOutputPath } = buildEvent;\n            const webpackRawStats = buildEvent.webpackStats;\n            if (!webpackRawStats) {\n                throw new Error('Webpack stats build result is required.');\n            }\n            // Fix incorrectly set `initial` value on chunks.\n            const extraEntryPoints = [\n                ...(0, helpers_1.normalizeExtraEntryPoints)(options.styles || [], 'styles'),\n                ...(0, helpers_1.normalizeExtraEntryPoints)(options.scripts || [], 'scripts'),\n            ];\n            const webpackStats = {\n                ...webpackRawStats,\n                chunks: (0, async_chunks_1.markAsyncChunksNonInitial)(webpackRawStats, extraEntryPoints),\n            };\n            if (!success) {\n                // If using bundle downleveling then there is only one build\n                // If it fails show any diagnostic messages and bail\n                if ((0, stats_1.statsHasWarnings)(webpackStats)) {\n                    context.logger.warn((0, stats_1.statsWarningsToString)(webpackStats, { colors: true }));\n                }\n                if ((0, stats_1.statsHasErrors)(webpackStats)) {\n                    context.logger.error((0, stats_1.statsErrorsToString)(webpackStats, { colors: true }));\n                }\n                return {\n                    webpackStats: webpackRawStats,\n                    output: { success: false },\n                };\n            }\n            else {\n                outputPaths = (0, output_paths_1.ensureOutputPaths)(baseOutputPath, i18n);\n                const scriptsEntryPointName = (0, helpers_1.normalizeExtraEntryPoints)(options.scripts || [], 'scripts').map((x) => x.bundleName);\n                if (i18n.shouldInline) {\n                    const success = await (0, i18n_inlining_1.i18nInlineEmittedFiles)(context, emittedFiles, i18n, baseOutputPath, Array.from(outputPaths.values()), scriptsEntryPointName, webpackOutputPath, options.i18nMissingTranslation);\n                    if (!success) {\n                        return {\n                            webpackStats: webpackRawStats,\n                            output: { success: false },\n                        };\n                    }\n                }\n                // Check for budget errors and display them to the user.\n                const budgets = options.budgets;\n                let budgetFailures;\n                if (budgets === null || budgets === void 0 ? void 0 : budgets.length) {\n                    budgetFailures = [...(0, bundle_calculator_1.checkBudgets)(budgets, webpackStats)];\n                    for (const { severity, message } of budgetFailures) {\n                        switch (severity) {\n                            case bundle_calculator_1.ThresholdSeverity.Warning:\n                                (_a = webpackStats.warnings) === null || _a === void 0 ? void 0 : _a.push({ message });\n                                break;\n                            case bundle_calculator_1.ThresholdSeverity.Error:\n                                (_b = webpackStats.errors) === null || _b === void 0 ? void 0 : _b.push({ message });\n                                break;\n                            default:\n                                assertNever(severity);\n                        }\n                    }\n                }\n                const buildSuccess = success && !(0, stats_1.statsHasErrors)(webpackStats);\n                if (buildSuccess) {\n                    // Copy assets\n                    if (!options.watch && ((_c = options.assets) === null || _c === void 0 ? void 0 : _c.length)) {\n                        spinner.start('Copying assets...');\n                        try {\n                            await (0, copy_assets_1.copyAssets)((0, utils_1.normalizeAssetPatterns)(options.assets, context.workspaceRoot, projectRoot, projectSourceRoot), Array.from(outputPaths.values()), context.workspaceRoot);\n                            spinner.succeed('Copying assets complete.');\n                        }\n                        catch (err) {\n                            spinner.fail(color_1.colors.redBright('Copying of assets failed.'));\n                            (0, error_1.assertIsError)(err);\n                            return {\n                                output: {\n                                    success: false,\n                                    error: 'Unable to copy assets: ' + err.message,\n                                },\n                                webpackStats: webpackRawStats,\n                            };\n                        }\n                    }\n                    if (options.index) {\n                        spinner.start('Generating index html...');\n                        const entrypoints = (0, package_chunk_sort_1.generateEntryPoints)({\n                            scripts: (_d = options.scripts) !== null && _d !== void 0 ? _d : [],\n                            styles: (_e = options.styles) !== null && _e !== void 0 ? _e : [],\n                        });\n                        const indexHtmlGenerator = new index_html_generator_1.IndexHtmlGenerator({\n                            cache: cacheOptions,\n                            indexPath: path.join(context.workspaceRoot, (0, webpack_browser_config_1.getIndexInputFile)(options.index)),\n                            entrypoints,\n                            deployUrl: options.deployUrl,\n                            sri: options.subresourceIntegrity,\n                            optimization: normalizedOptimization,\n                            crossOrigin: options.crossOrigin,\n                            postTransform: transforms.indexHtml,\n                        });\n                        let hasErrors = false;\n                        for (const [locale, outputPath] of outputPaths.entries()) {\n                            try {\n                                const { content, warnings, errors } = await indexHtmlGenerator.process({\n                                    baseHref: (_f = getLocaleBaseHref(i18n, locale)) !== null && _f !== void 0 ? _f : options.baseHref,\n                                    // i18nLocale is used when Ivy is disabled\n                                    lang: locale || undefined,\n                                    outputPath,\n                                    files: mapEmittedFilesToFileInfo(emittedFiles),\n                                });\n                                if (warnings.length || errors.length) {\n                                    spinner.stop();\n                                    warnings.forEach((m) => context.logger.warn(m));\n                                    errors.forEach((m) => {\n                                        context.logger.error(m);\n                                        hasErrors = true;\n                                    });\n                                    spinner.start();\n                                }\n                                const indexOutput = path.join(outputPath, (0, webpack_browser_config_1.getIndexOutputFile)(options.index));\n                                await fs.promises.mkdir(path.dirname(indexOutput), { recursive: true });\n                                await fs.promises.writeFile(indexOutput, content);\n                            }\n                            catch (error) {\n                                spinner.fail('Index html generation failed.');\n                                (0, error_1.assertIsError)(error);\n                                return {\n                                    webpackStats: webpackRawStats,\n                                    output: { success: false, error: error.message },\n                                };\n                            }\n                        }\n                        if (hasErrors) {\n                            spinner.fail('Index html generation failed.');\n                            return {\n                                webpackStats: webpackRawStats,\n                                output: { success: false },\n                            };\n                        }\n                        else {\n                            spinner.succeed('Index html generation complete.');\n                        }\n                    }\n                    if (options.serviceWorker) {\n                        spinner.start('Generating service worker...');\n                        for (const [locale, outputPath] of outputPaths.entries()) {\n                            try {\n                                await (0, service_worker_1.augmentAppWithServiceWorker)(projectRoot, context.workspaceRoot, outputPath, (_h = (_g = getLocaleBaseHref(i18n, locale)) !== null && _g !== void 0 ? _g : options.baseHref) !== null && _h !== void 0 ? _h : '/', options.ngswConfigPath);\n                            }\n                            catch (error) {\n                                spinner.fail('Service worker generation failed.');\n                                (0, error_1.assertIsError)(error);\n                                return {\n                                    webpackStats: webpackRawStats,\n                                    output: { success: false, error: error.message },\n                                };\n                            }\n                        }\n                        spinner.succeed('Service worker generation complete.');\n                    }\n                }\n                (0, stats_1.webpackStatsLogger)(context.logger, webpackStats, config, budgetFailures);\n                return {\n                    webpackStats: webpackRawStats,\n                    output: { success: buildSuccess },\n                };\n            }\n        }), (0, operators_1.map)(({ output: event, webpackStats }) => ({\n            ...event,\n            stats: (0, stats_1.generateBuildEventStats)(webpackStats, options),\n            baseOutputPath,\n            outputPath: baseOutputPath,\n            outputPaths: (outputPaths && Array.from(outputPaths.values())) || [baseOutputPath],\n            outputs: (outputPaths &&\n                [...outputPaths.entries()].map(([locale, path]) => {\n                    var _a;\n                    return ({\n                        locale,\n                        path,\n                        baseHref: (_a = getLocaleBaseHref(i18n, locale)) !== null && _a !== void 0 ? _a : options.baseHref,\n                    });\n                })) || {\n                path: baseOutputPath,\n                baseHref: options.baseHref,\n            },\n        })));\n    }));\n    function getLocaleBaseHref(i18n, locale) {\n        var _a, _b;\n        if (i18n.locales[locale] && ((_a = i18n.locales[locale]) === null || _a === void 0 ? void 0 : _a.baseHref) !== '') {\n            return (0, utils_1.urlJoin)(options.baseHref || '', (_b = i18n.locales[locale].baseHref) !== null && _b !== void 0 ? _b : `/${locale}/`);\n        }\n        return undefined;\n    }\n}\nexports.buildWebpackBrowser = buildWebpackBrowser;\nfunction assertNever(input) {\n    throw new Error(`Unexpected call to assertNever() with input: ${JSON.stringify(input, null /* replacer */, 4 /* tabSize */)}`);\n}\nfunction mapEmittedFilesToFileInfo(files = []) {\n    const filteredFiles = [];\n    for (const { file, name, extension, initial } of files) {\n        if (name && initial) {\n            filteredFiles.push({ file, extension, name });\n        }\n    }\n    return filteredFiles;\n}\nexports.default = (0, architect_1.createBuilder)(buildWebpackBrowser);\n"],"mappings":"AAAA,YAAY;;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAOA,IAAIA,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,KAAMC,MAAM,CAACC,MAAM,GAAI,UAASC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EAC5F,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5B,IAAIG,IAAI,GAAGP,MAAM,CAACQ,wBAAwB,CAACL,CAAC,EAAEC,CAAC,CAAC;EAChD,IAAI,CAACG,IAAI,KAAK,KAAK,IAAIA,IAAI,GAAG,CAACJ,CAAC,CAACM,UAAU,GAAGF,IAAI,CAACG,QAAQ,IAAIH,IAAI,CAACI,YAAY,CAAC,EAAE;IACjFJ,IAAI,GAAG;MAAEK,UAAU,EAAE,IAAI;MAAEC,GAAG,EAAE,YAAW;QAAE,OAAOV,CAAC,CAACC,CAAC,CAAC;MAAE;IAAE,CAAC;EAC/D;EACAJ,MAAM,CAACc,cAAc,CAACZ,CAAC,EAAEG,EAAE,EAAEE,IAAI,CAAC;AACtC,CAAC,GAAK,UAASL,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EACxB,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5BF,CAAC,CAACG,EAAE,CAAC,GAAGF,CAAC,CAACC,CAAC,CAAC;AAChB,CAAE,CAAC;AACH,IAAIW,kBAAkB,GAAI,IAAI,IAAI,IAAI,CAACA,kBAAkB,KAAMf,MAAM,CAACC,MAAM,GAAI,UAASC,CAAC,EAAEc,CAAC,EAAE;EAC3FhB,MAAM,CAACc,cAAc,CAACZ,CAAC,EAAE,SAAS,EAAE;IAAEU,UAAU,EAAE,IAAI;IAAEK,KAAK,EAAED;EAAE,CAAC,CAAC;AACvE,CAAC,GAAI,UAASd,CAAC,EAAEc,CAAC,EAAE;EAChBd,CAAC,CAAC,SAAS,CAAC,GAAGc,CAAC;AACpB,CAAC,CAAC;AACF,IAAIE,YAAY,GAAI,IAAI,IAAI,IAAI,CAACA,YAAY,IAAK,UAAUC,GAAG,EAAE;EAC7D,IAAIA,GAAG,IAAIA,GAAG,CAACV,UAAU,EAAE,OAAOU,GAAG;EACrC,IAAIC,MAAM,GAAG,CAAC,CAAC;EACf,IAAID,GAAG,IAAI,IAAI,EAAE,KAAK,IAAIf,CAAC,IAAIe,GAAG,EAAE,IAAIf,CAAC,KAAK,SAAS,IAAIJ,MAAM,CAACqB,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,GAAG,EAAEf,CAAC,CAAC,EAAEL,eAAe,CAACqB,MAAM,EAAED,GAAG,EAAEf,CAAC,CAAC;EACxIW,kBAAkB,CAACK,MAAM,EAAED,GAAG,CAAC;EAC/B,OAAOC,MAAM;AACjB,CAAC;AACDpB,MAAM,CAACc,cAAc,CAACU,OAAO,EAAE,YAAY,EAAE;EAAEP,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DO,OAAO,CAACC,mBAAmB,GAAGD,OAAO,CAACE,aAAa,GAAG,KAAK,CAAC;AAC5D,MAAMC,WAAW,GAAGC,OAAO,CAAC,2BAA2B,CAAC;AACxD,MAAMC,eAAe,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AAChE,MAAME,EAAE,GAAGZ,YAAY,CAACU,OAAO,CAAC,IAAI,CAAC,CAAC;AACtC,MAAMG,IAAI,GAAGb,YAAY,CAACU,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1C,MAAMI,MAAM,GAAGJ,OAAO,CAAC,MAAM,CAAC;AAC9B,MAAMK,WAAW,GAAGL,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAMM,OAAO,GAAGN,OAAO,CAAC,aAAa,CAAC;AACtC,MAAMO,mBAAmB,GAAGP,OAAO,CAAC,+BAA+B,CAAC;AACpE,MAAMQ,OAAO,GAAGR,OAAO,CAAC,mBAAmB,CAAC;AAC5C,MAAMS,aAAa,GAAGT,OAAO,CAAC,yBAAyB,CAAC;AACxD,MAAMU,OAAO,GAAGV,OAAO,CAAC,mBAAmB,CAAC;AAC5C,MAAMW,eAAe,GAAGX,OAAO,CAAC,2BAA2B,CAAC;AAC5D,MAAMY,sBAAsB,GAAGZ,OAAO,CAAC,6CAA6C,CAAC;AACrF,MAAMa,iBAAiB,GAAGb,OAAO,CAAC,6BAA6B,CAAC;AAChE,MAAMc,cAAc,GAAGd,OAAO,CAAC,0BAA0B,CAAC;AAC1D,MAAMe,oBAAoB,GAAGf,OAAO,CAAC,gCAAgC,CAAC;AACtE,MAAMgB,aAAa,GAAGhB,OAAO,CAAC,yBAAyB,CAAC;AACxD,MAAMiB,gBAAgB,GAAGjB,OAAO,CAAC,4BAA4B,CAAC;AAC9D,MAAMkB,SAAS,GAAGlB,OAAO,CAAC,qBAAqB,CAAC;AAChD,MAAMmB,SAAS,GAAGnB,OAAO,CAAC,qBAAqB,CAAC;AAChD,MAAMoB,wBAAwB,GAAGpB,OAAO,CAAC,oCAAoC,CAAC;AAC9E,MAAMqB,SAAS,GAAGrB,OAAO,CAAC,uBAAuB,CAAC;AAClD,MAAMsB,cAAc,GAAGtB,OAAO,CAAC,kCAAkC,CAAC;AAClE,MAAMuB,SAAS,GAAGvB,OAAO,CAAC,6BAA6B,CAAC;AACxD,MAAMwB,OAAO,GAAGxB,OAAO,CAAC,2BAA2B,CAAC;AACpD;AACA;AACA;AACA;AACAJ,OAAO,CAACE,aAAa,GAAG,KAAK;AAAC,SACf2B,UAAU;EAAA;AAAA;AA0BzB;AACA;AACA;AACA;AAAA;EAAA,gCA7BA,WAA0BC,OAAO,EAAEC,OAAO,EAAEC,6BAA6B,EAAE;IACvE,IAAIC,EAAE,EAAEC,EAAE;IACV,MAAMC,kBAAkB,GAAGL,OAAO,CAACM,UAAU;IAC7C;IACA,MAAMC,eAAe,GAAGP,OAAO,CAACQ,KAAK,GAAGR,OAAO,GAAG;MAAE,GAAGA,OAAO;MAAES,MAAM,EAAE;IAAG,CAAC;IAC5E,MAAM;MAAEC,MAAM;MAAEC,WAAW;MAAEC,iBAAiB;MAAEC;IAAK,CAAC,SAAS,CAAC,CAAC,EAAEnB,wBAAwB,CAACoB,2CAA2C,EAAEP,eAAe,EAAEN,OAAO,EAAGc,GAAG,IAAK,CACxK,CAAC,CAAC,EAAEpB,SAAS,CAACqB,eAAe,EAAED,GAAG,CAAC,EACnC,CAAC,CAAC,EAAEpB,SAAS,CAACsB,eAAe,EAAEF,GAAG,CAAC,CACtC,CAAC;IACF;IACA,IAAI,CAAC,CAACZ,EAAE,GAAGH,OAAO,CAACS,MAAM,MAAM,IAAI,IAAIN,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACe,MAAM,KAAK,EAAE,CAACd,EAAE,GAAGG,eAAe,CAACE,MAAM,MAAM,IAAI,IAAIL,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACc,MAAM,CAAC,EAAE;MAC3J,CAAC,CAAC,EAAEtC,OAAO,CAACuC,sBAAsB,EAAEnB,OAAO,CAACS,MAAM,EAAER,OAAO,CAACmB,aAAa,EAAET,WAAW,EAAEC,iBAAiB,CAAC,CAACS,OAAO,CAAC,CAAC;QAAEC;MAAO,CAAC,KAAK;QAC/H,IAAIA,MAAM,CAACC,UAAU,CAAC,IAAI,CAAC,EAAE;UACzB,MAAM,IAAIC,KAAK,CAAC,sEAAsE,CAAC;QAC3F;MACJ,CAAC,CAAC;IACN;IACA,IAAIC,iBAAiB;IACrB,IAAIvB,6BAA6B,EAAE;MAC/BuB,iBAAiB,SAASvB,6BAA6B,CAACQ,MAAM,CAAC;IACnE;IACA,IAAIV,OAAO,CAAC0B,gBAAgB,EAAE;MAC1B,CAAC,CAAC,EAAE9C,OAAO,CAAC+C,eAAe,EAAE1B,OAAO,CAACmB,aAAa,EAAEf,kBAAkB,CAAC;IAC3E;IACA,OAAO;MAAEK,MAAM,EAAEe,iBAAiB,IAAIf,MAAM;MAAEC,WAAW;MAAEC,iBAAiB;MAAEC;IAAK,CAAC;EACxF,CAAC;EAAA;AAAA;AAKD,SAAS1C,mBAAmB,CAAC6B,OAAO,EAAEC,OAAO,EAAE2B,UAAU,GAAG,CAAC,CAAC,EAAE;EAC5D,IAAIzB,EAAE;EACN,MAAM0B,WAAW,GAAG,CAAC1B,EAAE,GAAGF,OAAO,CAAC6B,MAAM,MAAM,IAAI,IAAI3B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC4B,OAAO;EACzF,IAAI,CAACF,WAAW,EAAE;IACd,MAAM,IAAIL,KAAK,CAAC,gCAAgC,CAAC;EACrD;EACA,MAAMQ,cAAc,GAAGvD,IAAI,CAACwD,OAAO,CAAChC,OAAO,CAACmB,aAAa,EAAEpB,OAAO,CAACM,UAAU,CAAC;EAC9E,IAAI4B,WAAW;EACf;EACA,CAAC,CAAC,EAAEzC,SAAS,CAAC0C,8BAA8B,EAAElC,OAAO,CAACmB,aAAa,CAAC;EACpE,OAAO,CAAC,CAAC,EAAE1C,MAAM,CAAC0D,IAAI,EAAEnC,OAAO,CAACoC,kBAAkB,CAACR,WAAW,CAAC,CAAC,CAACS,IAAI,CAAC,CAAC,CAAC,EAAE3D,WAAW,CAAC4D,SAAS;IAAA,6BAAE,WAAOC,eAAe,EAAK;MACxH,IAAIrC,EAAE;MACN,IAAIC,EAAE;MACN;MACA,MAAM,CAAC,CAAC,EAAEd,aAAa,CAACmD,oBAAoB,EAAExC,OAAO,CAAC;MACtD;MACA,MAAMyC,cAAc,SAAS3C,UAAU,CAACC,OAAO,EAAEC,OAAO,EAAE2B,UAAU,CAACe,oBAAoB,CAAC;MAC1F;MACA,IAAI3C,OAAO,CAACQ,KAAK,EAAE;QACf,MAAMoC,cAAc,GAAGnE,IAAI,CAACoE,IAAI,CAAC5C,OAAO,CAACmB,aAAa,EAAE,CAAC,CAAC,EAAE1B,wBAAwB,CAACoD,iBAAiB,EAAE9C,OAAO,CAAC+C,KAAK,CAAC,CAAC;QACvH,CAAC5C,EAAE,GAAG,CAACC,EAAE,GAAGsC,cAAc,CAAChC,MAAM,EAAEsC,OAAO,MAAM,IAAI,IAAI7C,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAIC,EAAE,CAAC4C,OAAO,GAAG,EAAG;QAC9FN,cAAc,CAAChC,MAAM,CAACsC,OAAO,CAACC,IAAI,CAAC;UAC/BC,KAAK,EAAGC,QAAQ,IAAK;YACjBA,QAAQ,CAACC,KAAK,CAACC,eAAe,CAACC,GAAG,CAAC,eAAe,EAAGC,WAAW,IAAK;cACjEA,WAAW,CAACC,gBAAgB,CAACC,GAAG,CAACb,cAAc,CAAC;YACpD,CAAC,CAAC;UACN;QACJ,CAAC,CAAC;MACN;MACA,OAAO;QACH,GAAGF,cAAc;QACjBgB,YAAY,EAAE,CAAC,CAAC,EAAEvE,iBAAiB,CAACwE,qBAAqB,EAAEnB,eAAe,EAAEvC,OAAO,CAACmB,aAAa;MACrG,CAAC;IACL,CAAC;IAAA;MAAA;IAAA;EAAA,IAAC,EAAE,CAAC,CAAC,EAAEzC,WAAW,CAAC4D,SAAS;EAC7B;EACA,CAAC;IAAE7B,MAAM;IAAEC,WAAW;IAAEC,iBAAiB;IAAEC,IAAI;IAAE6C;EAAa,CAAC,KAAK;IAChE,MAAME,sBAAsB,GAAG,CAAC,CAAC,EAAEhF,OAAO,CAACiF,qBAAqB,EAAE7D,OAAO,CAAC8D,YAAY,CAAC;IACvF,OAAO,CAAC,CAAC,EAAEvF,eAAe,CAACwF,UAAU,EAAErD,MAAM,EAAET,OAAO,EAAE;MACpD+D,cAAc,EAAE1F,OAAO,CAAC,SAAS,CAAC;MAClC2F,OAAO,EAAErC,UAAU,CAACqC,OAAO,KACtB,CAACC,KAAK,EAAExD,MAAM,KAAK;QAChB,IAAIV,OAAO,CAACmE,OAAO,EAAE;UACjBlE,OAAO,CAACmE,MAAM,CAACC,IAAI,CAACH,KAAK,CAACI,QAAQ,CAAC5D,MAAM,CAACwD,KAAK,CAAC,CAAC;QACrD;MACJ,CAAC;IACT,CAAC,CAAC,CAAC5B,IAAI,CAAC,CAAC,CAAC,EAAE3D,WAAW,CAAC4F,SAAS;IAAA;IACjC;IAAA;MAAA,8BACA,WAAOC,UAAU,EAAK;QAClB,IAAIrE,EAAE,EAAEC,EAAE,EAAEqE,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE;QAClC,MAAMC,OAAO,GAAG,IAAIvF,SAAS,CAACwF,OAAO,EAAE;QACvCD,OAAO,CAACE,OAAO,GAAGjF,OAAO,CAACkF,QAAQ,KAAK,KAAK;QAC5C,MAAM;UAAEC,OAAO;UAAEC,YAAY,GAAG,EAAE;UAAE9E,UAAU,EAAE+E;QAAkB,CAAC,GAAGb,UAAU;QAChF,MAAMc,eAAe,GAAGd,UAAU,CAACe,YAAY;QAC/C,IAAI,CAACD,eAAe,EAAE;UAClB,MAAM,IAAI9D,KAAK,CAAC,yCAAyC,CAAC;QAC9D;QACA;QACA,MAAMgE,gBAAgB,GAAG,CACrB,GAAG,CAAC,CAAC,EAAE3F,SAAS,CAAC4F,yBAAyB,EAAEzF,OAAO,CAAC0F,MAAM,IAAI,EAAE,EAAE,QAAQ,CAAC,EAC3E,GAAG,CAAC,CAAC,EAAE7F,SAAS,CAAC4F,yBAAyB,EAAEzF,OAAO,CAAC2F,OAAO,IAAI,EAAE,EAAE,SAAS,CAAC,CAChF;QACD,MAAMJ,YAAY,GAAG;UACjB,GAAGD,eAAe;UAClBM,MAAM,EAAE,CAAC,CAAC,EAAEhG,cAAc,CAACiG,yBAAyB,EAAEP,eAAe,EAAEE,gBAAgB;QAC3F,CAAC;QACD,IAAI,CAACL,OAAO,EAAE;UACV;UACA;UACA,IAAI,CAAC,CAAC,EAAErF,OAAO,CAACgG,gBAAgB,EAAEP,YAAY,CAAC,EAAE;YAC7CtF,OAAO,CAACmE,MAAM,CAAC2B,IAAI,CAAC,CAAC,CAAC,EAAEjG,OAAO,CAACkG,qBAAqB,EAAET,YAAY,EAAE;cAAEU,MAAM,EAAE;YAAK,CAAC,CAAC,CAAC;UAC3F;UACA,IAAI,CAAC,CAAC,EAAEnG,OAAO,CAACoG,cAAc,EAAEX,YAAY,CAAC,EAAE;YAC3CtF,OAAO,CAACmE,MAAM,CAAC+B,KAAK,CAAC,CAAC,CAAC,EAAErG,OAAO,CAACsG,mBAAmB,EAAEb,YAAY,EAAE;cAAEU,MAAM,EAAE;YAAK,CAAC,CAAC,CAAC;UAC1F;UACA,OAAO;YACHV,YAAY,EAAED,eAAe;YAC7BhE,MAAM,EAAE;cAAE6D,OAAO,EAAE;YAAM;UAC7B,CAAC;QACL,CAAC,MACI;UACDjD,WAAW,GAAG,CAAC,CAAC,EAAE9C,cAAc,CAACiH,iBAAiB,EAAErE,cAAc,EAAEnB,IAAI,CAAC;UACzE,MAAMyF,qBAAqB,GAAG,CAAC,CAAC,EAAEzG,SAAS,CAAC4F,yBAAyB,EAAEzF,OAAO,CAAC2F,OAAO,IAAI,EAAE,EAAE,SAAS,CAAC,CAACY,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,UAAU,CAAC;UACjI,IAAI5F,IAAI,CAAC6F,YAAY,EAAE;YACnB,MAAMvB,OAAO,SAAS,CAAC,CAAC,EAAElG,eAAe,CAAC0H,sBAAsB,EAAE1G,OAAO,EAAEmF,YAAY,EAAEvE,IAAI,EAAEmB,cAAc,EAAE4E,KAAK,CAACxE,IAAI,CAACF,WAAW,CAAC2E,MAAM,EAAE,CAAC,EAAEP,qBAAqB,EAAEjB,iBAAiB,EAAErF,OAAO,CAAC8G,sBAAsB,CAAC;YAC1N,IAAI,CAAC3B,OAAO,EAAE;cACV,OAAO;gBACHI,YAAY,EAAED,eAAe;gBAC7BhE,MAAM,EAAE;kBAAE6D,OAAO,EAAE;gBAAM;cAC7B,CAAC;YACL;UACJ;UACA;UACA,MAAM4B,OAAO,GAAG/G,OAAO,CAAC+G,OAAO;UAC/B,IAAIC,cAAc;UAClB,IAAID,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAAC7F,MAAM,EAAE;YAClE8F,cAAc,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEnI,mBAAmB,CAACoI,YAAY,EAAEF,OAAO,EAAExB,YAAY,CAAC,CAAC;YAClF,KAAK,MAAM;cAAE2B,QAAQ;cAAEC;YAAQ,CAAC,IAAIH,cAAc,EAAE;cAChD,QAAQE,QAAQ;gBACZ,KAAKrI,mBAAmB,CAACuI,iBAAiB,CAACC,OAAO;kBAC9C,CAAClH,EAAE,GAAGoF,YAAY,CAAC+B,QAAQ,MAAM,IAAI,IAAInH,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC8C,IAAI,CAAC;oBAAEkE;kBAAQ,CAAC,CAAC;kBACtF;gBACJ,KAAKtI,mBAAmB,CAACuI,iBAAiB,CAAC5F,KAAK;kBAC5C,CAACpB,EAAE,GAAGmF,YAAY,CAACgC,MAAM,MAAM,IAAI,IAAInH,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC6C,IAAI,CAAC;oBAAEkE;kBAAQ,CAAC,CAAC;kBACpF;gBACJ;kBACIK,WAAW,CAACN,QAAQ,CAAC;cAAC;YAElC;UACJ;UACA,MAAMO,YAAY,GAAGtC,OAAO,IAAI,CAAC,CAAC,CAAC,EAAErF,OAAO,CAACoG,cAAc,EAAEX,YAAY,CAAC;UAC1E,IAAIkC,YAAY,EAAE;YACd;YACA,IAAI,CAACzH,OAAO,CAACQ,KAAK,KAAK,CAACiE,EAAE,GAAGzE,OAAO,CAACS,MAAM,MAAM,IAAI,IAAIgE,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACvD,MAAM,CAAC,EAAE;cAC1F6D,OAAO,CAAC2C,KAAK,CAAC,mBAAmB,CAAC;cAClC,IAAI;gBACA,MAAM,CAAC,CAAC,EAAE3I,aAAa,CAAC4I,UAAU,EAAE,CAAC,CAAC,EAAE/I,OAAO,CAACuC,sBAAsB,EAAEnB,OAAO,CAACS,MAAM,EAAER,OAAO,CAACmB,aAAa,EAAET,WAAW,EAAEC,iBAAiB,CAAC,EAAEgG,KAAK,CAACxE,IAAI,CAACF,WAAW,CAAC2E,MAAM,EAAE,CAAC,EAAE5G,OAAO,CAACmB,aAAa,CAAC;gBACxM2D,OAAO,CAAC6C,OAAO,CAAC,0BAA0B,CAAC;cAC/C,CAAC,CACD,OAAOC,GAAG,EAAE;gBACR9C,OAAO,CAAC+C,IAAI,CAAChJ,OAAO,CAACmH,MAAM,CAAC8B,SAAS,CAAC,2BAA2B,CAAC,CAAC;gBACnE,CAAC,CAAC,EAAE/I,OAAO,CAACgJ,aAAa,EAAEH,GAAG,CAAC;gBAC/B,OAAO;kBACHvG,MAAM,EAAE;oBACJ6D,OAAO,EAAE,KAAK;oBACdgB,KAAK,EAAE,yBAAyB,GAAG0B,GAAG,CAACV;kBAC3C,CAAC;kBACD5B,YAAY,EAAED;gBAClB,CAAC;cACL;YACJ;YACA,IAAItF,OAAO,CAAC+C,KAAK,EAAE;cACfgC,OAAO,CAAC2C,KAAK,CAAC,0BAA0B,CAAC;cACzC,MAAMO,WAAW,GAAG,CAAC,CAAC,EAAE5I,oBAAoB,CAAC6I,mBAAmB,EAAE;gBAC9DvC,OAAO,EAAE,CAACjB,EAAE,GAAG1E,OAAO,CAAC2F,OAAO,MAAM,IAAI,IAAIjB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,EAAE;gBACnEgB,MAAM,EAAE,CAACf,EAAE,GAAG3E,OAAO,CAAC0F,MAAM,MAAM,IAAI,IAAIf,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG;cACnE,CAAC,CAAC;cACF,MAAMwD,kBAAkB,GAAG,IAAIjJ,sBAAsB,CAACkJ,kBAAkB,CAAC;gBACrEC,KAAK,EAAE3E,YAAY;gBACnB4E,SAAS,EAAE7J,IAAI,CAACoE,IAAI,CAAC5C,OAAO,CAACmB,aAAa,EAAE,CAAC,CAAC,EAAE1B,wBAAwB,CAACoD,iBAAiB,EAAE9C,OAAO,CAAC+C,KAAK,CAAC,CAAC;gBAC3GkF,WAAW;gBACXM,SAAS,EAAEvI,OAAO,CAACuI,SAAS;gBAC5BC,GAAG,EAAExI,OAAO,CAACyI,oBAAoB;gBACjC3E,YAAY,EAAEF,sBAAsB;gBACpC8E,WAAW,EAAE1I,OAAO,CAAC0I,WAAW;gBAChCC,aAAa,EAAE/G,UAAU,CAACgH;cAC9B,CAAC,CAAC;cACF,IAAIC,SAAS,GAAG,KAAK;cACrB,KAAK,MAAM,CAACC,MAAM,EAAExI,UAAU,CAAC,IAAI4B,WAAW,CAAC6G,OAAO,EAAE,EAAE;gBACtD,IAAI;kBACA,MAAM;oBAAEC,OAAO;oBAAE1B,QAAQ;oBAAEC;kBAAO,CAAC,SAASY,kBAAkB,CAACc,OAAO,CAAC;oBACnEC,QAAQ,EAAE,CAACtE,EAAE,GAAGuE,iBAAiB,CAACtI,IAAI,EAAEiI,MAAM,CAAC,MAAM,IAAI,IAAIlE,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG5E,OAAO,CAACkJ,QAAQ;oBAClG;oBACAE,IAAI,EAAEN,MAAM,IAAI9L,SAAS;oBACzBsD,UAAU;oBACV+I,KAAK,EAAEC,yBAAyB,CAAClE,YAAY;kBACjD,CAAC,CAAC;kBACF,IAAIkC,QAAQ,CAACpG,MAAM,IAAIqG,MAAM,CAACrG,MAAM,EAAE;oBAClC6D,OAAO,CAACwE,IAAI,EAAE;oBACdjC,QAAQ,CAACjG,OAAO,CAAExE,CAAC,IAAKoD,OAAO,CAACmE,MAAM,CAAC2B,IAAI,CAAClJ,CAAC,CAAC,CAAC;oBAC/C0K,MAAM,CAAClG,OAAO,CAAExE,CAAC,IAAK;sBAClBoD,OAAO,CAACmE,MAAM,CAAC+B,KAAK,CAACtJ,CAAC,CAAC;sBACvBgM,SAAS,GAAG,IAAI;oBACpB,CAAC,CAAC;oBACF9D,OAAO,CAAC2C,KAAK,EAAE;kBACnB;kBACA,MAAM8B,WAAW,GAAG/K,IAAI,CAACoE,IAAI,CAACvC,UAAU,EAAE,CAAC,CAAC,EAAEZ,wBAAwB,CAAC+J,kBAAkB,EAAEzJ,OAAO,CAAC+C,KAAK,CAAC,CAAC;kBAC1G,MAAMvE,EAAE,CAACkL,QAAQ,CAACC,KAAK,CAAClL,IAAI,CAACmL,OAAO,CAACJ,WAAW,CAAC,EAAE;oBAAEK,SAAS,EAAE;kBAAK,CAAC,CAAC;kBACvE,MAAMrL,EAAE,CAACkL,QAAQ,CAACI,SAAS,CAACN,WAAW,EAAER,OAAO,CAAC;gBACrD,CAAC,CACD,OAAO7C,KAAK,EAAE;kBACVpB,OAAO,CAAC+C,IAAI,CAAC,+BAA+B,CAAC;kBAC7C,CAAC,CAAC,EAAE9I,OAAO,CAACgJ,aAAa,EAAE7B,KAAK,CAAC;kBACjC,OAAO;oBACHZ,YAAY,EAAED,eAAe;oBAC7BhE,MAAM,EAAE;sBAAE6D,OAAO,EAAE,KAAK;sBAAEgB,KAAK,EAAEA,KAAK,CAACgB;oBAAQ;kBACnD,CAAC;gBACL;cACJ;cACA,IAAI0B,SAAS,EAAE;gBACX9D,OAAO,CAAC+C,IAAI,CAAC,+BAA+B,CAAC;gBAC7C,OAAO;kBACHvC,YAAY,EAAED,eAAe;kBAC7BhE,MAAM,EAAE;oBAAE6D,OAAO,EAAE;kBAAM;gBAC7B,CAAC;cACL,CAAC,MACI;gBACDJ,OAAO,CAAC6C,OAAO,CAAC,iCAAiC,CAAC;cACtD;YACJ;YACA,IAAI5H,OAAO,CAAC+J,aAAa,EAAE;cACvBhF,OAAO,CAAC2C,KAAK,CAAC,8BAA8B,CAAC;cAC7C,KAAK,MAAM,CAACoB,MAAM,EAAExI,UAAU,CAAC,IAAI4B,WAAW,CAAC6G,OAAO,EAAE,EAAE;gBACtD,IAAI;kBACA,MAAM,CAAC,CAAC,EAAExJ,gBAAgB,CAACyK,2BAA2B,EAAErJ,WAAW,EAAEV,OAAO,CAACmB,aAAa,EAAEd,UAAU,EAAE,CAACwE,EAAE,GAAG,CAACD,EAAE,GAAGsE,iBAAiB,CAACtI,IAAI,EAAEiI,MAAM,CAAC,MAAM,IAAI,IAAIjE,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG7E,OAAO,CAACkJ,QAAQ,MAAM,IAAI,IAAIpE,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,GAAG,EAAE9E,OAAO,CAACiK,cAAc,CAAC;gBACzQ,CAAC,CACD,OAAO9D,KAAK,EAAE;kBACVpB,OAAO,CAAC+C,IAAI,CAAC,mCAAmC,CAAC;kBACjD,CAAC,CAAC,EAAE9I,OAAO,CAACgJ,aAAa,EAAE7B,KAAK,CAAC;kBACjC,OAAO;oBACHZ,YAAY,EAAED,eAAe;oBAC7BhE,MAAM,EAAE;sBAAE6D,OAAO,EAAE,KAAK;sBAAEgB,KAAK,EAAEA,KAAK,CAACgB;oBAAQ;kBACnD,CAAC;gBACL;cACJ;cACApC,OAAO,CAAC6C,OAAO,CAAC,qCAAqC,CAAC;YAC1D;UACJ;UACA,CAAC,CAAC,EAAE9H,OAAO,CAACoK,kBAAkB,EAAEjK,OAAO,CAACmE,MAAM,EAAEmB,YAAY,EAAE7E,MAAM,EAAEsG,cAAc,CAAC;UACrF,OAAO;YACHzB,YAAY,EAAED,eAAe;YAC7BhE,MAAM,EAAE;cAAE6D,OAAO,EAAEsC;YAAa;UACpC,CAAC;QACL;MACJ,CAAC;MAAA;QAAA;MAAA;IAAA,IAAC,EAAE,CAAC,CAAC,EAAE9I,WAAW,CAAC4H,GAAG,EAAE,CAAC;MAAEjF,MAAM,EAAE6I,KAAK;MAAE5E;IAAa,CAAC,MAAM;MAC3D,GAAG4E,KAAK;MACRjG,KAAK,EAAE,CAAC,CAAC,EAAEpE,OAAO,CAACsK,uBAAuB,EAAE7E,YAAY,EAAEvF,OAAO,CAAC;MAClEgC,cAAc;MACd1B,UAAU,EAAE0B,cAAc;MAC1BE,WAAW,EAAGA,WAAW,IAAI0E,KAAK,CAACxE,IAAI,CAACF,WAAW,CAAC2E,MAAM,EAAE,CAAC,IAAK,CAAC7E,cAAc,CAAC;MAClFqI,OAAO,EAAGnI,WAAW,IACjB,CAAC,GAAGA,WAAW,CAAC6G,OAAO,EAAE,CAAC,CAACxC,GAAG,CAAC,CAAC,CAACuC,MAAM,EAAErK,IAAI,CAAC,KAAK;QAC/C,IAAI0B,EAAE;QACN,OAAQ;UACJ2I,MAAM;UACNrK,IAAI;UACJyK,QAAQ,EAAE,CAAC/I,EAAE,GAAGgJ,iBAAiB,CAACtI,IAAI,EAAEiI,MAAM,CAAC,MAAM,IAAI,IAAI3I,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGH,OAAO,CAACkJ;QAC9F,CAAC;MACL,CAAC,CAAC,IAAK;QACPzK,IAAI,EAAEuD,cAAc;QACpBkH,QAAQ,EAAElJ,OAAO,CAACkJ;MACtB;IACJ,CAAC,CAAC,CAAC,CAAC;EACR,CAAC,CAAC,CAAC;EACH,SAASC,iBAAiB,CAACtI,IAAI,EAAEiI,MAAM,EAAE;IACrC,IAAI3I,EAAE,EAAEC,EAAE;IACV,IAAIS,IAAI,CAACyJ,OAAO,CAACxB,MAAM,CAAC,IAAI,CAAC,CAAC3I,EAAE,GAAGU,IAAI,CAACyJ,OAAO,CAACxB,MAAM,CAAC,MAAM,IAAI,IAAI3I,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC+I,QAAQ,MAAM,EAAE,EAAE;MAC/G,OAAO,CAAC,CAAC,EAAEtK,OAAO,CAAC2L,OAAO,EAAEvK,OAAO,CAACkJ,QAAQ,IAAI,EAAE,EAAE,CAAC9I,EAAE,GAAGS,IAAI,CAACyJ,OAAO,CAACxB,MAAM,CAAC,CAACI,QAAQ,MAAM,IAAI,IAAI9I,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAI,IAAG0I,MAAO,GAAE,CAAC;IAC5I;IACA,OAAO9L,SAAS;EACpB;AACJ;AACAkB,OAAO,CAACC,mBAAmB,GAAGA,mBAAmB;AACjD,SAASqJ,WAAW,CAACgD,KAAK,EAAE;EACxB,MAAM,IAAIhJ,KAAK,CAAE,gDAA+CiJ,IAAI,CAACC,SAAS,CAACF,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,cAAe,EAAC,CAAC;AAClI;AACA,SAASlB,yBAAyB,CAACD,KAAK,GAAG,EAAE,EAAE;EAC3C,MAAMsB,aAAa,GAAG,EAAE;EACxB,KAAK,MAAM;IAAEC,IAAI;IAAEC,IAAI;IAAEC,SAAS;IAAEC;EAAQ,CAAC,IAAI1B,KAAK,EAAE;IACpD,IAAIwB,IAAI,IAAIE,OAAO,EAAE;MACjBJ,aAAa,CAAC1H,IAAI,CAAC;QAAE2H,IAAI;QAAEE,SAAS;QAAED;MAAK,CAAC,CAAC;IACjD;EACJ;EACA,OAAOF,aAAa;AACxB;AACAzM,OAAO,CAAC8M,OAAO,GAAG,CAAC,CAAC,EAAE3M,WAAW,CAAC4M,aAAa,EAAE9M,mBAAmB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}