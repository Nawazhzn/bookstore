{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"../_services/storage.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_form_18_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtext(1, \" Username is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_18_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_18_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password must be at least 6 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_18_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtemplate(1, LoginComponent_form_18_div_13_div_1_Template, 2, 0, \"div\", 30);\n    i0.ɵɵtemplate(2, LoginComponent_form_18_div_13_div_2_Template, 2, 0, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r5 = i0.ɵɵreference(12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_form_18_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Login failed: \", ctx_r7.errorMessage, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nfunction LoginComponent_form_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 17, 18);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_18_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const _r2 = i0.ɵɵreference(1);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(_r2.form.valid && ctx_r10.onSubmit());\n    });\n    i0.ɵɵelementStart(2, \"div\", 19)(3, \"label\", 20);\n    i0.ɵɵtext(4, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 21, 22);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_18_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.form.username = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, LoginComponent_form_18_div_7_Template, 2, 0, \"div\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 19)(9, \"label\", 24);\n    i0.ɵɵtext(10, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 25, 26);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_18_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.form.password = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, LoginComponent_form_18_div_13_Template, 3, 2, \"div\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 19)(15, \"button\", 27);\n    i0.ɵɵtext(16, \" Login \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 19);\n    i0.ɵɵtemplate(18, LoginComponent_form_18_div_18_Template, 2, 1, \"div\", 28);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(1);\n    const _r3 = i0.ɵɵreference(6);\n    const _r5 = i0.ɵɵreference(12);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.username)(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, _r2.submitted && _r3.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors && _r2.submitted);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.password)(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, _r2.submitted && _r5.errors));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors && _r2.submitted);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", _r2.submitted && ctx_r0.isLoginFailed);\n  }\n}\nfunction LoginComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Logged in as \", ctx_r1.roles, \". \");\n  }\n}\nexport class LoginComponent {\n  constructor(authService, storageService) {\n    this.authService = authService;\n    this.storageService = storageService;\n    this.form = {\n      username: null,\n      password: null\n    };\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.roles = [];\n  }\n  ngOnInit() {\n    if (this.storageService.isLoggedIn()) {\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n    }\n  }\n  onSubmit() {\n    const {\n      username,\n      password\n    } = this.form;\n    this.authService.login(username, password).subscribe({\n      next: data => {\n        this.storageService.saveUser(data);\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.storageService.getUser().roles;\n        this.reloadPage();\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.StorageService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 20,\n  vars: 2,\n  consts: [[\"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\", \"x\", \"0px\", \"y\", \"0px\", \"width\", \"100%\", \"height\", \"100%\", \"viewBox\", \"0 0 1600 900\", \"preserveAspectRatio\", \"xMidYMax slice\"], [\"id\", \"bg\"], [\"offset\", \"0%\", 2, \"stop-color\", \"rgba(130, 158, 249, 0.06)\"], [\"offset\", \"50%\", 2, \"stop-color\", \"rgba(76, 190, 255, 0.6)\"], [\"offset\", \"100%\", 2, \"stop-color\", \"rgba(115, 209, 72, 0.2)\"], [\"id\", \"wave\", \"fill\", \"url(#bg)\", \"d\", \"M-363.852,502.589c0,0,236.988-41.997,505.475,0\\n\\ts371.981,38.998,575.971,0s293.985-39.278,505.474,5.859s493.475,48.368,716.963-4.995v560.106H-363.852V502.589z\"], [0, \"xlink\", \"href\", \"#wave\", \"opacity\", \".3\"], [\"attributeName\", \"transform\", \"attributeType\", \"XML\", \"type\", \"translate\", \"dur\", \"10s\", \"calcMode\", \"spline\", \"values\", \"270 230; -334 180; 270 230\", \"keyTimes\", \"0; .5; 1\", \"keySplines\", \"0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0\", \"repeatCount\", \"indefinite\"], [0, \"xlink\", \"href\", \"#wave\", \"opacity\", \".6\"], [\"attributeName\", \"transform\", \"attributeType\", \"XML\", \"type\", \"translate\", \"dur\", \"8s\", \"calcMode\", \"spline\", \"values\", \"-270 230;243 220;-270 230\", \"keyTimes\", \"0; .6; 1\", \"keySplines\", \"0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0\", \"repeatCount\", \"indefinite\"], [0, \"xlink\", \"href\", \"#wave\", \"opacty\", \".9\"], [\"attributeName\", \"transform\", \"attributeType\", \"XML\", \"type\", \"translate\", \"dur\", \"6s\", \"calcMode\", \"spline\", \"values\", \"0 230;-140 200;0 230\", \"keyTimes\", \"0; .4; 1\", \"keySplines\", \"0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0\", \"repeatCount\", \"indefinite\"], [1, \"col-md-12\"], [1, \"card\", \"card-container\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\", 3, \"ngModel\", \"ngClass\", \"ngModelChange\"], [\"password\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-success\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"body\");\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(1, \"svg\", 0)(2, \"defs\")(3, \"linearGradient\", 1);\n      i0.ɵɵelement(4, \"stop\", 2)(5, \"stop\", 3)(6, \"stop\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"path\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"g\")(9, \"use\", 6);\n      i0.ɵɵelement(10, \"animateTransform\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"use\", 8);\n      i0.ɵɵelement(12, \"animateTransform\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"use\", 10);\n      i0.ɵɵelement(14, \"animateTransform\", 11);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(15, \"div\", 12)(16, \"div\", 13);\n      i0.ɵɵelement(17, \"img\", 14);\n      i0.ɵɵtemplate(18, LoginComponent_form_18_Template, 19, 11, \"form\", 15);\n      i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 2, 1, \"div\", 16);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinLengthValidator, i4.NgModel, i4.NgForm],\n  styles: [\"label[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-top: 10px;\\n}\\n\\n.card-container.card[_ngcontent-%COMP%] {\\n  max-width: 400px !important;\\n  padding: 40px 40px;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  background-color: #f7f7f7;\\n  padding: 20px 25px 30px;\\n  margin: 0 auto 25px;\\n  margin-top: 50px;\\n  border-radius: 2px;\\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);\\n}\\n\\n.profile-img-card[_ngcontent-%COMP%] {\\n  width: 96px;\\n  height: 96px;\\n  margin: 0 auto 10px;\\n  display: block;\\n  border-radius: 50%;\\n}\\n/*# sourceURL=webpack://./src/app/login/login.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7RUFDZCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSwyQkFBMkI7RUFDM0Isa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsZ0JBQWdCO0VBR2hCLGtCQUFrQjtFQUdsQiwwQ0FBMEM7QUFDNUM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixjQUFjO0VBR2Qsa0JBQWtCO0FBQ3BCIiwic291cmNlc0NvbnRlbnQiOlsibGFiZWwge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLXRvcDogMTBweDtcbn1cblxuLmNhcmQtY29udGFpbmVyLmNhcmQge1xuICBtYXgtd2lkdGg6IDQwMHB4ICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmc6IDQwcHggNDBweDtcbn1cblxuLmNhcmQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmN2Y3O1xuICBwYWRkaW5nOiAyMHB4IDI1cHggMzBweDtcbiAgbWFyZ2luOiAwIGF1dG8gMjVweDtcbiAgbWFyZ2luLXRvcDogNTBweDtcbiAgLW1vei1ib3JkZXItcmFkaXVzOiAycHg7XG4gIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMnB4O1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIC1tb3otYm94LXNoYWRvdzogMHB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjMpO1xuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAycHggMnB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgYm94LXNoYWRvdzogMHB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjMpO1xufVxuXG4ucHJvZmlsZS1pbWctY2FyZCB7XG4gIHdpZHRoOiA5NnB4O1xuICBoZWlnaHQ6IDk2cHg7XG4gIG1hcmdpbjogMCBhdXRvIDEwcHg7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDUwJTtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r10","LoginComponent","constructor","authService","storageService","username","password","ngOnInit","isLoggedIn","roles","getUser","onSubmit","form","login","subscribe","next","data","saveUser","isLoginFailed","reloadPage","error","err","errorMessage","message","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Nawaz\\Downloads\\mean-stack-authentication-authorization-master\\mean-stack-authentication-authorization-master\\frontend\\src\\app\\login\\login.component.html","C:\\Users\\Nawaz\\Downloads\\mean-stack-authentication-authorization-master\\mean-stack-authentication-authorization-master\\frontend\\src\\app\\login\\login.component.ts"],"sourcesContent":["\n<body>\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"100%\" height=\"100%\" viewBox=\"0 0 1600 900\" preserveAspectRatio=\"xMidYMax slice\">\n\t\t<defs>\n\t\t\t<linearGradient id=\"bg\">\n\t\t\t\t<stop offset=\"0%\" style=\"stop-color:rgba(130, 158, 249, 0.06)\"></stop>\n\t\t\t\t<stop offset=\"50%\" style=\"stop-color:rgba(76, 190, 255, 0.6)\"></stop>\n\t\t\t\t<stop offset=\"100%\" style=\"stop-color:rgba(115, 209, 72, 0.2)\"></stop>\n\t\t\t</linearGradient>\n\t\t\t<path id=\"wave\" fill=\"url(#bg)\" d=\"M-363.852,502.589c0,0,236.988-41.997,505.475,0\n\ts371.981,38.998,575.971,0s293.985-39.278,505.474,5.859s493.475,48.368,716.963-4.995v560.106H-363.852V502.589z\" />\n\t\t</defs>\n\t\t<g>\n\t\t\t<use xlink:href='#wave' opacity=\".3\">\n\t\t\t\t<animateTransform\n          attributeName=\"transform\"\n          attributeType=\"XML\"\n          type=\"translate\"\n          dur=\"10s\"\n          calcMode=\"spline\"\n          values=\"270 230; -334 180; 270 230\"\n          keyTimes=\"0; .5; 1\"\n          keySplines=\"0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0\"\n          repeatCount=\"indefinite\" />\n\t\t\t</use>\n\t\t\t<use xlink:href='#wave' opacity=\".6\">\n\t\t\t\t<animateTransform\n          attributeName=\"transform\"\n          attributeType=\"XML\"\n          type=\"translate\"\n          dur=\"8s\"\n          calcMode=\"spline\"\n          values=\"-270 230;243 220;-270 230\"\n          keyTimes=\"0; .6; 1\"\n          keySplines=\"0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0\"\n          repeatCount=\"indefinite\" />\n\t\t\t</use>\n\t\t\t<use xlink:href='#wave' opacty=\".9\">\n\t\t\t\t<animateTransform\n          attributeName=\"transform\"\n          attributeType=\"XML\"\n          type=\"translate\"\n          dur=\"6s\"\n          calcMode=\"spline\"\n          values=\"0 230;-140 200;0 230\"\n          keyTimes=\"0; .4; 1\"\n          keySplines=\"0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0\"\n          repeatCount=\"indefinite\" />\n\t\t\t</use>\n\t\t</g>\n\t</svg>\n</body>\n\n\n\n\n<div class=\"col-md-12\">\n  <div class=\"card card-container\">\n    <img\n      id=\"profile-img\"\n      src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n      class=\"profile-img-card\"\n    />\n    <form\n      *ngIf=\"!isLoggedIn\"\n      name=\"form\"\n      (ngSubmit)=\"f.form.valid && onSubmit()\"\n      #f=\"ngForm\"\n      novalidate\n    >\n      <div class=\"form-group\">\n        <label for=\"username\">Username</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          name=\"username\"\n          [(ngModel)]=\"form.username\"\n          required\n          #username=\"ngModel\"\n          [ngClass]=\"{ 'is-invalid': f.submitted && username.errors }\"\n        />\n        <div *ngIf=\"username.errors && f.submitted\" class=\"invalid-feedback\">\n          Username is required!\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password</label>\n        <input\n          type=\"password\"\n          class=\"form-control\"\n          name=\"password\"\n          [(ngModel)]=\"form.password\"\n          required\n          minlength=\"6\"\n          #password=\"ngModel\"\n          [ngClass]=\"{ 'is-invalid': f.submitted && password.errors }\"\n        />\n        <div *ngIf=\"password.errors && f.submitted\" class=\"invalid-feedback\">\n          <div *ngIf=\"password.errors['required']\">Password is required</div>\n          <div *ngIf=\"password.errors['minlength']\">\n            Password must be at least 6 characters\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <button class=\"btn btn-primary btn-block\">\n          Login\n        </button>\n      </div>\n      <div class=\"form-group\">\n        <div *ngIf=\"f.submitted && isLoginFailed\" class=\"alert alert-danger\" role=\"alert\">\n          Login failed: {{ errorMessage }}\n        </div>\n      </div>\n    </form>\n\n    <div class=\"alert alert-success\" *ngIf=\"isLoggedIn\">\n      Logged in as {{ roles }}.\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../_services/auth.service';\nimport { StorageService } from '../_services/storage.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n  form: any = {\n    username: null,\n    password: null\n  };\n  isLoggedIn = false;\n  isLoginFailed = false;\n  errorMessage = '';\n  roles: string[] = [];\n\n  constructor(private authService: AuthService, private storageService: StorageService) { }\n\n  ngOnInit(): void {\n    if (this.storageService.isLoggedIn()) {\n      this.isLoggedIn = true;\n      this.roles = this.storageService.getUser().roles;\n    }\n  }\n\n  onSubmit(): void {\n    const { username, password } = this.form;\n\n    this.authService.login(username, password).subscribe({\n      next: data => {\n        this.storageService.saveUser(data);\n\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.storageService.getUser().roles;\n        this.reloadPage();\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n\n  reloadPage(): void {\n    window.location.reload();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}